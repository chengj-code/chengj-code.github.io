<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="chengj-code">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://example.com/2023/06/02/vue3和vue2区别/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
    
    
        
        <meta name="description" content="Hexo Theme Redefine, Redefine Your Hexo Journey.">
<meta property="og:type" content="article">
<meta property="og:title" content="vue3和vue2区别">
<meta property="og:url" content="http://example.com/2023/06/02/vue3%E5%92%8Cvue2%E5%8C%BA%E5%88%AB/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Hexo Theme Redefine, Redefine Your Hexo Journey.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/images/redefine-og.webp">
<meta property="article:published_time" content="2023-06-02T01:59:11.000Z">
<meta property="article:modified_time" content="2023-09-14T14:24:03.022Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/redefine-og.webp">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/chengj-favicon.ico" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/chengj-favicon.ico">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/chengj-favicon.ico">
    <!--- Page Info-->
    
    <title>
        
            vue3和vue2区别 | chengj-code的博客
        
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/css/build/tailwind.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
    
    
    
    
    

    <script id="hexo-configurations">
    window.config = {"hostname":"example.com","root":"/","language":"en"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"delete_mask":false,"title_alignment":"left","headings_top_spacing":{"h1":"3.2rem","h2":"2.4rem","h3":"1.9rem","h4":"1.6rem","h5":"1.4rem","h6":"1.3rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":6,"number":true,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"pangu_js":false,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null,"default_mode":"light"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":false,"custom_message":null},"open_graph":{"enable":true,"image":"/images/redefine-og.webp","description":"Hexo Theme Redefine, Redefine Your Hexo Journey."},"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/thumbnail01.jpg","dark":"/images/thumbnail02.jpg"},"title":"认准的路，别问多远，坚持走下去","subtitle":{"text":[],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":false,"style":"default","links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":null},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"11.4.1"}},"version":"2.8.2","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"}},"search":{"enable":false,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":null},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/8/17 11:45:14"};
    window.lang_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>



<body>
	<div class="progress-bar-container">
	

	
	<span class="pjax-progress-bar"></span>
	<!--        <span class="swup-progress-icon">-->
	<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
	<!--        </span>-->
	
</div>

<main class="page-container" id="swup">

	

	<div class="main-content-container flex flex-col justify-between min-h-dvh">
		<div class="main-content-header">
			<header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                chengj-code的博客
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    HOME
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    ARCHIVES
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                HOME
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                ARCHIVES
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">1</div>
        <div class="label text-third-text-color text-sm">Tags</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">0</div>
        <div class="label text-third-text-color text-sm">Categories</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">5</div>
        <div class="label text-third-text-color text-sm">Posts</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


		</div>

		<div class="main-content-body transition-fade-up">
			

			<div class="main-content">
				<div class="post-page-container flex relative justify-between box-border w-full h-full">
	<div class="article-content-container">

		<div class="article-title relative w-full">
			
			<div class="w-full flex items-center pt-6 justify-start">
				<h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">vue3和vue2区别</h1>
			</div>
			
		</div>

		
		<div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
			<div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
				<img src="/images/chengj-avatar.jpeg">
			</div>
			<div class="info flex flex-col justify-between">
				<div class="author flex items-center">
					<span class="name text-default-text-color text-lg font-semibold">chengj-code</span>
					
					<span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv1</span>
					
				</div>
				<div class="meta-info">
					<div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-06-02 09:59:11</span>
        <span class="mobile">2023-06-02 09:59:11</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-09-14 22:24:03</span>
            <span class="mobile">2023-09-14 22:24:03</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

				</div>
			</div>
		</div>
		

		


		<div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
			<h2 id="Vue3的变化"><a href="#Vue3的变化" class="headerlink" title="Vue3的变化"></a>Vue3的变化</h2><p>响应式原理，组合式API，支持多个根节点(Fragments)（好处：减少标签层级，减小内存占用），生命周期变化，使用方法时需要先导入，pinia状态管理工具</p>
<h2 id="响应式原理"><a href="#响应式原理" class="headerlink" title="响应式原理"></a>响应式原理</h2><p><strong>Vue2</strong>：使用数据劫持和订阅发布者模式实现数据的响应式，通过Object.defineProperty()劫持数据的setter和getter，在数据发生变化时发布消息给订阅者，订阅者收到消息后进行相应的处理。</p>
<p>问题：</p>
<ul>
<li>Vue2的Object.defineProperty()不能检测对象的新增属性和通过数组下标或length属性给数据重新赋值。</li>
<li>对象中包含对象时会一次性递归到底，开销较大</li>
</ul>
<p>解决：Vue.$set</p>
<p><strong>Vue3</strong>是基于ES6的Proxy API对数据代理。解决了Object.defineProperty()的缺点</p>
<p><strong>惰性监听</strong>：</p>
<ul>
<li>reactive只对obj的第一层进行代理，第二层children不是响应式的</li>
<li>当obj.children获取的时候再进行第二层的代理</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> obj=<span class="hljs-title function_">reactive</span>(&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;zd&#x27;</span>,<br>    <span class="hljs-attr">children</span>: &#123; <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;zl&#x27;</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="组合式API"><a href="#组合式API" class="headerlink" title="组合式API"></a>组合式API</h2><p>Vue2使用选项式API，分为data、method、computed等</p>
<p>Vue3使用组合式API</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script&gt;<br>import &#123;ref&#125; from &#x27;vue&#x27;<br>setup()&#123;<br>    const num=ref(0)<br>    const addNum=()=&gt;&#123;<br>        return num.value++<br>    &#125;<br>    return&#123;<br>        num, addNum<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p>setup语法糖写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import &#123;ref&#125; from &#x27;vue&#x27;<br>const num=ref(0)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h2 id="定义变量和方法"><a href="#定义变量和方法" class="headerlink" title="定义变量和方法"></a>定义变量和方法</h2><p>Vue2：在data(){}中定义数据变量，在method:{}中创建方法。</p>
<p>Vue3：</p>
<ul>
<li>在setup方法中使用ref&#x2F;reactive定义响应式数据，定义方法，然后return出去</li>
<li>使用setup语法糖时，可以直接定义数据和方法</li>
</ul>
<h2 id="生命周期函数"><a href="#生命周期函数" class="headerlink" title="生命周期函数"></a>生命周期函数</h2><p>Vue3生命周期函数可以执行多次，多次执行传入的回调会在时机成熟时<strong>依次执行</strong></p>
<p>使用上 Vue3 组合式 API 需要先引入；Vue2 选项 API 则可直接调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js">vue2           -- -----&gt;      vue3								--------&gt;      vue3<br>选项式<span class="hljs-variable constant_">API</span>					  选项式<span class="hljs-variable constant_">API</span>									    组合式<span class="hljs-variable constant_">API</span><br>beforeCreate   --------&gt;      <span class="hljs-title function_">setup</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)						 <br>created        --------&gt;      <span class="hljs-title function_">setup</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>beforeMount    --------&gt;      <span class="hljs-title function_">onBeforeMount</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)                --------&gt;      <span class="hljs-title function_">onBeforeMount</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>mounted        --------&gt;      <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)                    --------&gt;      <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>beforeUpdate   --------&gt;      <span class="hljs-title function_">onBeforeUpdate</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)               --------&gt;      <span class="hljs-title function_">onBeforeUpdate</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>updated        --------&gt;      <span class="hljs-title function_">onUpdated</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)                    --------&gt;      <span class="hljs-title function_">onUpdated</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>beforeDestroy  --------&gt;      <span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)              --------&gt;      <span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>destroyed      --------&gt;      <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)                  --------&gt;      <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>activated      --------&gt;      <span class="hljs-title function_">onActivated</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)                  --------&gt;      <span class="hljs-title function_">onActivated</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>deactivated    --------&gt;      <span class="hljs-title function_">onDeactivated</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)                --------&gt;      <span class="hljs-title function_">onDeactivated</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br>errorCaptured  --------&gt;      <span class="hljs-title function_">onErrorCaptured</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)              --------&gt;      <span class="hljs-title function_">onErrorCaptured</span>(<span class="hljs-function">()=&gt;</span>&#123;&#125;)<br></code></pre></td></tr></table></figure>

<h2 id="Vue3父子组件通信"><a href="#Vue3父子组件通信" class="headerlink" title="Vue3父子组件通信"></a>Vue3父子组件通信</h2><h3 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h3><p>父组件中给子组件绑定属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup&gt;<br><span class="hljs-keyword">import</span> son <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./son.vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">200</span>)<br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  count.<span class="hljs-property">value</span>=<span class="hljs-number">2000</span><br> &#125;,<span class="hljs-number">3000</span>)<br>&lt;/script&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;father&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>父组件<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">son</span> <span class="hljs-attr">message</span>=<span class="hljs-string">&quot;father message&quot;</span> <span class="hljs-attr">:count</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">son</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>子组件中通过props选项接收：通过宏函数defineProps({属性名: 类型})</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup&gt;<br><span class="hljs-keyword">const</span> props=<span class="hljs-title function_">defineProps</span>(&#123;<br>  <span class="hljs-attr">message</span>: <span class="hljs-title class_">String</span>,<br>  <span class="hljs-attr">count</span>:<span class="hljs-title class_">Number</span><br>&#125;)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props);<br>&lt;/script&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;son&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>子组件<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>父组件传入的数据： &#123;&#123; message &#125;&#125;----&#123;&#123;count&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h3 id="子传父"><a href="#子传父" class="headerlink" title="子传父"></a>子传父</h3><p>父组件中给子组件标签通过@绑定事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup&gt;<br><span class="hljs-keyword">import</span> son1 <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./son1.vue&#x27;</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">getMessage</span>=(<span class="hljs-params">msg</span>)=&gt;&#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg);<br> &#125;<br>&lt;/script&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;father&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>父组件<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!-- 1.绑定自定义事件 --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">son1</span> @<span class="hljs-attr">getSonMessage</span>=<span class="hljs-string">&quot;getMessage&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">son1</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>子组件内部通过$emit方法出触发事件：通过宏函数defineEmits([‘自定义事件名’])</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup&gt;<br><span class="hljs-comment">// 2.通过defineEmits()拿到emit方法</span><br><span class="hljs-keyword">const</span> emit =<span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">&#x27;getSonMessage&#x27;</span>])<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMsg</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-comment">// 3.触发自定义事件，传数据给父组件</span><br>  <span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;getSonMessage&#x27;</span>,<span class="hljs-string">&#x27;this is son message&#x27;</span>)<br> &#125;<br>&lt;/script&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;son&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>子组件<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sendMsg&quot;</span>&gt;</span>触发自定义事件<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h2 id="ref和reactive"><a href="#ref和reactive" class="headerlink" title="ref和reactive"></a>ref和reactive</h2><p>reactive() 作用：接收对象类型数据的参数传入，并返回一个响应式的对象</p>
<p>ref() 作用：接收简单类型或对象类型数据的参数传入，并返回一个响应式的对象，在模板中直接使用，在js中通过.value属性访问</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>// 1.导入函数<br>import &#123; reactive &#125; from &#x27;vue&#x27;;<br>// 2.执行函数，传入一个对象类型的参数，变量接收<br>const state = reactive(&#123; count: 0 &#125;)<br>const setCount = () =&gt; &#123;<br>  state.count++<br>&#125;<br>&lt;/script&gt;<br>&lt;script setup&gt;<br>// 1.导入函数<br>import &#123; ref &#125; from &#x27;vue&#x27;;<br>// 2.执行函数，传入一个对象类型的参数，变量接收<br>const state = ref(0)<br>const setCount = () =&gt; &#123;<br>  // 脚本区域修改ref产生的响应式对象数据 必须通过.value属性<br>  state.value++<br> &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h3 id="通过ref获取组件实例"><a href="#通过ref获取组件实例" class="headerlink" title="通过ref获取组件实例"></a>通过ref获取组件实例</h3><p>需要先定义ref(null)，然后通过.value获取组件实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>import son1 from &#x27;./son1.vue&#x27;<br>import &#123; ref, onMounted &#125; from &#x27;vue&#x27;;<br>const h2ref = ref(null)<br>const son1ref = ref(null)<br>onMounted(() =&gt; &#123;<br>  console.log(h2ref.value);<br>  console.log(son1ref.value.name)<br>&#125;)<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;div class=&quot;father&quot;&gt;<br>    &lt;h2 ref=&quot;h2ref&quot;&gt;顶层组件&lt;/h2&gt;<br>    &lt;!-- 1.绑定自定义事件 --&gt;<br>    &lt;son1 ref=&quot;son1ref&quot; @getSonMessage=&quot;getMessage&quot;&gt;&lt;/son1&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>

<h2 id="provide和reject"><a href="#provide和reject" class="headerlink" title="provide和reject"></a>provide和reject</h2><p>作用：顶层组件向任意的底层组件传递数据和方法，实现跨层组件通信</p>
<p>跨层传递普通数据</p>
<ol>
<li><p>顶层组件通过provide函数提供数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">provide</span>(<span class="hljs-string">&#x27;key&#x27;</span>, 顶层组件中的数据)<br></code></pre></td></tr></table></figure>
</li>
<li><p>底层组件通过inject函数获取数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> message=<span class="hljs-title function_">inject</span>(<span class="hljs-string">&#x27;key&#x27;</span>)<br></code></pre></td></tr></table></figure></li>
</ol>
<p>跨层传递方法</p>
<p>顶层组件可以向底层组件传递方法，底层组件调用方法修改顶层组件中的数据</p>
<p>在不破坏单向数据流的前提下修改顶层组件的数据，谁的数据谁修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 顶层组件</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">setCount</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  count.<span class="hljs-property">value</span>++<br>&#125;<br><span class="hljs-title function_">provide</span>(<span class="hljs-string">&#x27;funtion-key&#x27;</span>, setCount)<br><span class="hljs-comment">// 底层组件</span><br><span class="hljs-keyword">const</span> setCount = <span class="hljs-title function_">inject</span>(<span class="hljs-string">&#x27;funtion-key&#x27;</span>)<br>    &lt;button @click=<span class="hljs-string">&quot;setCount&quot;</span>&gt;修改顶层数据&lt;/button&gt;<br></code></pre></td></tr></table></figure>

<h2 id="pinia状态管理工具"><a href="#pinia状态管理工具" class="headerlink" title="pinia状态管理工具"></a>pinia状态管理工具</h2><p>pinia安装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">npm install pinia<br></code></pre></td></tr></table></figure>

<p>在main.js中注册</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">const</span> pinia=<span class="hljs-title function_">createPinia</span>()<br><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(pinia).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>新建stores&#x2F;counter.js</p>
<ul>
<li>state数据通过ref定义响应式数据</li>
<li>getters数据通过computed计算属性方法定义</li>
<li>将所有定义的变量和方法全部return出去</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;counter&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// state属性</span><br>    <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-comment">// actions同步方法</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        count.<span class="hljs-property">value</span>++<br>    &#125;<br>    <span class="hljs-comment">// actions异步方法</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">API_URL</span> = <span class="hljs-string">&#x27;http://geek.itheima.net/v1_0/channels&#x27;</span><br>    <span class="hljs-keyword">const</span> list = <span class="hljs-title function_">ref</span>([])<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">API_URL</span>)<br>        <span class="hljs-comment">// console.log(res);</span><br>        list.<span class="hljs-property">value</span>=res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">channels</span><br>     &#125;<br>    <span class="hljs-comment">// getters计算属性</span><br>    <span class="hljs-keyword">const</span> computedCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">return</span> &#123;<br>        count, increment, computedCount, list, getList<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>在页面中导入使用</p>
<ul>
<li><p>如果直接解构赋值，会丢失数据的响应式</p>
<p><code>const &#123; count, computedCount &#125; = counterStore</code></p>
</li>
<li><p>使用storeToRef方法包裹保持数据响应式</p>
<p><code>const &#123; count, computedCount &#125; = storeToRefs(counterStore)</code></p>
</li>
<li><p>方法直接从原来的counterStore中解构赋值<br><code>const &#123; increment &#125; = counterStore</code></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script setup&gt;<br><span class="hljs-keyword">import</span> &#123; onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; useCounterStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./stores/counter&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; storeToRefs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span>;<br><span class="hljs-comment">// 执行方法得到store实例对象</span><br><span class="hljs-keyword">const</span> counterStore = <span class="hljs-title function_">useCounterStore</span>()<br><span class="hljs-comment">// 直接解构赋值 响应式的丢失</span><br><span class="hljs-comment">// const &#123; count, computedCount &#125; = counterStore</span><br><span class="hljs-comment">// 方法包裹 保持响应式更细</span><br><span class="hljs-keyword">const</span> &#123; count, computedCount &#125; = <span class="hljs-title function_">storeToRefs</span>(counterStore)<br><span class="hljs-comment">// 方法直接从原来的counterStore中解构赋值</span><br><span class="hljs-keyword">const</span> &#123; increment &#125; = counterStore<br><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  counterStore.<span class="hljs-title function_">getList</span>()<br> &#125;)<br>&lt;/script&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;increment&quot;</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;increment&quot;</span>&gt;</span>&#123;&#123; computedCount &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in counterStore.list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h2 id="v-model原理不同"><a href="#v-model原理不同" class="headerlink" title="v-model原理不同"></a>v-model原理不同</h2><h3 id="Vue2的v-model原理"><a href="#Vue2的v-model原理" class="headerlink" title="Vue2的v-model原理"></a>Vue2的v-model原理</h3><p>v-model 是语法糖，本质还是父子组件间的通信</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;set-input v-model=<span class="hljs-string">&quot;msg&quot;</span> /&gt;<br>运行后：<br>&lt;set-input :value=<span class="hljs-string">&quot;msg&quot;</span> @input=<span class="hljs-string">&quot;msg=$events&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<p>.sync语法糖的使用</p>
<p>.sync 和 v-model 都是语法糖，本质还是父子组件间的通信。使用 .sync 修饰符实现父子组件多个数据双向绑定。</p>
<p>因为 vue2 中组件只能定义一个 v-model，如果父子需要实现多个数据双向绑定，就需要借助 .sync 修饰符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;child-comp v-model=<span class="hljs-string">&quot;msg&quot;</span> :foo.<span class="hljs-property">sync</span>=<span class="hljs-string">&quot;foo&quot;</span>  /&gt;<br>  <br><span class="hljs-comment">//可翻译为</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">child-comp</span> </span></span><br><span class="hljs-tag"><span class="language-xml"> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;msg&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;msg=$event&quot;</span>   </span></span><br><span class="hljs-tag"><span class="language-xml"> <span class="hljs-attr">:foo</span>=<span class="hljs-string">&quot;foo&quot;</span> @<span class="hljs-attr">update:foo</span>=<span class="hljs-string">&quot;foo=$event&quot;</span>  /&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>一个组件上的 <code>v-model</code> 默认会利用名为 <code>value</code> 的 prop 和名为 <code>input</code> 的事件，但是像单选框、复选框等类型的输入控件可能会将 <code>value</code> 用于不同的目的。<code>model</code> 选项可以用来避免这样的冲突</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;base-checkbox v-model=<span class="hljs-string">&quot;lovingVue&quot;</span>&gt;&lt;/base-checkbox&gt;<br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;base-checkbox&#x27;</span>, &#123;<br>  <span class="hljs-attr">model</span>: &#123;<br>    <span class="hljs-attr">prop</span>: <span class="hljs-string">&#x27;checked&#x27;</span>,<br>    <span class="hljs-attr">event</span>: <span class="hljs-string">&#x27;change&#x27;</span><br>  &#125;,<br>  <span class="hljs-attr">props</span>: &#123;<br>    <span class="hljs-attr">checked</span>: <span class="hljs-title class_">Boolean</span><br>  &#125;,<br>  <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;input</span><br><span class="hljs-string">      type=&quot;checkbox&quot;</span><br><span class="hljs-string">      v-bind:checked=&quot;checked&quot;</span><br><span class="hljs-string">      v-on:change=&quot;$emit(&#x27;change&#x27;, $event.target.checked)&quot;</span><br><span class="hljs-string">    &gt;</span><br><span class="hljs-string">  `</span><br>&#125;)<br></code></pre></td></tr></table></figure>



<h3 id="Vue3的v-model原理"><a href="#Vue3的v-model原理" class="headerlink" title="Vue3的v-model原理"></a>Vue3的v-model原理</h3><h4 id="在原生标签上使用"><a href="#在原生标签上使用" class="headerlink" title="在原生标签上使用"></a>在原生标签上使用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;input v-model=<span class="hljs-string">&quot;searchText&quot;</span> /&gt;<br><span class="hljs-comment">// 翻译后  </span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;searchText&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;searchText = $event.target.value&quot;</span>/&gt;</span></span><br></code></pre></td></tr></table></figure>

<h4 id="在组件上使用"><a href="#在组件上使用" class="headerlink" title="在组件上使用"></a>在组件上使用</h4><p>默认情况下，<code>v-model</code> 在组件上都是使用 <code>modelValue</code> 作为 prop，并以 <code>update:modelValue</code> 作为对应的事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;<span class="hljs-title class_">CustomInput</span> v-model=<span class="hljs-string">&quot;searchText&quot;</span> 可翻译为/&gt;<br><span class="hljs-comment">// 可翻译为</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">CustomInput</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">:modelValue</span>=<span class="hljs-string">&quot;searchText&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  @<span class="hljs-attr">update:modelValue</span>=<span class="hljs-string">&quot;newValue =&gt; searchText = newValue&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="hljs-comment">// 子组件内</span><br>&lt;!-- <span class="hljs-title class_">CustomInput</span>.<span class="hljs-property">vue</span> --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;modelValue&#x27;</span>])</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">&#x27;update:modelValue&#x27;</span>])</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;modelValue&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;$emit(&#x27;update:modelValue&#x27;, $event.target.value)&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>      <br></code></pre></td></tr></table></figure>

<p>可以通过给 <code>v-model</code> 指定一个参数来更改这些名字：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;<span class="hljs-title class_">MyComponent</span> v-<span class="hljs-attr">model</span>:title=<span class="hljs-string">&quot;bookTitle&quot;</span> /&gt;<br>    <br>&lt;!-- <span class="hljs-title class_">MyComponent</span>.<span class="hljs-property">vue</span> --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;title&#x27;</span>])</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">&#x27;update:title&#x27;</span>])</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;title&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;$emit(&#x27;update:title&#x27;, $event.target.value)&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>    <br></code></pre></td></tr></table></figure>

<p>在 vue3 一个组件可以使用多个 v-model ，统一了 vue2 的 v-model 和 .sync 修饰符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;<span class="hljs-title class_">UserName</span><br>  v-<span class="hljs-attr">model</span>:first-name=<span class="hljs-string">&quot;first&quot;</span><br>  v-<span class="hljs-attr">model</span>:last-name=<span class="hljs-string">&quot;last&quot;</span><br>/&gt;<br>    <br>  <span class="hljs-comment">//可翻译为</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">child-comp</span> </span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">:first-name</span>=<span class="hljs-string">&quot;name&quot;</span> @<span class="hljs-attr">update:first-name</span>=<span class="hljs-string">&quot;name=$event&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">:last-name</span>=<span class="hljs-string">&quot;age&quot;</span> @<span class="hljs-attr">update:last-name</span>=<span class="hljs-string">&quot;age=$event&quot;</span> /&gt;</span></span> <br>      <br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">defineProps</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">firstName</span>: <span class="hljs-title class_">String</span>,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">lastName</span>: <span class="hljs-title class_">String</span></span></span><br><span class="language-javascript"><span class="language-xml">&#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">&#x27;update:firstName&#x27;</span>, <span class="hljs-string">&#x27;update:lastName&#x27;</span>])</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;firstName&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;$emit(&#x27;update:firstName&#x27;, $event.target.value)&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;lastName&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;$emit(&#x27;update:lastName&#x27;, $event.target.value)&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h2 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h2><h3 id="Vue2自定义指令"><a href="#Vue2自定义指令" class="headerlink" title="Vue2自定义指令"></a>Vue2自定义指令</h3><p>使用Vue.directive</p>
<p>一个指令定义对象可以提供如下几个钩子函数 </p>
<ul>
<li><code>bind</code>：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。</li>
<li><code>inserted</code>：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。</li>
<li><code>update</code>：所在组件的 VNode 更新时调用，<strong>但是可能发生在其子 VNode 更新之前</strong>。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新 (详细的钩子函数参数见下)。</li>
</ul>
<p>指令钩子函数会被传入以下参数</p>
<ul>
<li><code>el</code>：指令所绑定的元素，可以用来直接操作 DOM。</li>
<li>binding：一个对象，包含以下 property：<ul>
<li><code>name</code>：指令名，不包括 <code>v-</code> 前缀。</li>
<li><code>value</code>：指令的绑定值，例如：<code>v-my-directive=&quot;1 + 1&quot;</code> 中，绑定值为 <code>2</code>。</li>
<li><code>oldValue</code>：指令绑定的前一个值，仅在 <code>update</code> 和 <code>componentUpdated</code> 钩子中可用。无论值是否改变都可用。</li>
<li><code>expression</code>：字符串形式的指令表达式。例如 <code>v-my-directive=&quot;1 + 1&quot;</code> 中，表达式为 <code>&quot;1 + 1&quot;</code>。</li>
<li><code>arg</code>：传给指令的参数，可选。例如 <code>v-my-directive:foo</code> 中，参数为 <code>&quot;foo&quot;</code>。</li>
<li><code>modifiers</code>：一个包含修饰符的对象。例如：<code>v-my-directive.foo.bar</code> 中，修饰符对象为 <code>&#123; foo: true, bar: true &#125;</code>。</li>
</ul>
</li>
<li><code>vnode</code>：Vue 编译生成的虚拟节点。移步 <a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/api/#VNode-%E6%8E%A5%E5%8F%A3">VNode API</a> 来了解更多详情。</li>
<li><code>oldVnode</code>：上一个虚拟节点，仅在 <code>update</code> 和 <code>componentUpdated</code> 钩子中可用。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// Vue全局指令封装</span><br><span class="hljs-comment">// 封装中间件函数插件</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">install</span> () &#123;<br>    <span class="hljs-comment">// 全局自定义指令，针对指令所在的原生标签调用focus方法</span><br>    <span class="hljs-comment">// 指令所在标签 被插入到真实DOM时才触发 如果标签用display:none隐藏再出现，不会触发inserted</span><br>    <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;fofo&#x27;</span>, &#123;<br>      <span class="hljs-title function_">inserted</span> (el) &#123;<br>        <span class="hljs-title function_">fn</span>(el)<br>      &#125;,<br>      <span class="hljs-title function_">update</span> (el) &#123;<br>        <span class="hljs-comment">// 指令所在标签被更新时就触发</span><br>        <span class="hljs-title function_">fn</span>(el)<br>      &#125;<br>    &#125;)<br>  &#125;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span> (<span class="hljs-params">el</span>) &#123;<br>  <span class="hljs-keyword">if</span> (el.<span class="hljs-property">nodeName</span> === <span class="hljs-string">&#x27;TEXTAREA&#x27;</span> || el.<span class="hljs-property">nodeName</span> === <span class="hljs-string">&#x27;INPUT&#x27;</span>) &#123;<br>    el.<span class="hljs-title function_">focus</span>()<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// el本身不是输入框 尝试往里获取一下</span><br>    <span class="hljs-keyword">const</span> theInput = el.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input&#x27;</span>)<br>    <span class="hljs-keyword">const</span> theTextarea = el.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;textarea&#x27;</span>)<br>    <span class="hljs-comment">// 判断：不一定获取的到，需要加判断，有值了再执行.foucs()才不报错</span><br>    <span class="hljs-keyword">if</span> (theInput) theInput.<span class="hljs-title function_">focus</span>()<br>    <span class="hljs-keyword">if</span> (theTextarea) theTextarea.<span class="hljs-title function_">focus</span>()<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">import</span> directiveObj <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/directive&#x27;</span><br><span class="hljs-comment">// 执行目标对象里的install方法并传入Vue类</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(directiveObj)<br></code></pre></td></tr></table></figure>



<h3 id="Vue3自定义指令"><a href="#Vue3自定义指令" class="headerlink" title="Vue3自定义指令"></a>Vue3自定义指令</h3><p>指令钩子函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> myDirective = &#123;<br>  <span class="hljs-comment">// 在绑定元素的 attribute 前</span><br>  <span class="hljs-comment">// 或事件监听器应用前调用</span><br>  <span class="hljs-title function_">created</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) &#123;<br>    <span class="hljs-comment">// 下面会介绍各个参数的细节</span><br>  &#125;,<br>  <span class="hljs-comment">// 在元素被插入到 DOM 前调用</span><br>  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) &#123;&#125;,<br>  <span class="hljs-comment">// 在绑定元素的父组件</span><br>  <span class="hljs-comment">// 及他自己的所有子节点都挂载完成后调用</span><br>  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) &#123;&#125;,<br>  <span class="hljs-comment">// 绑定元素的父组件更新前调用</span><br>  <span class="hljs-title function_">beforeUpdate</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) &#123;&#125;,<br>  <span class="hljs-comment">// 在绑定元素的父组件</span><br>  <span class="hljs-comment">// 及他自己的所有子节点都更新后调用</span><br>  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) &#123;&#125;,<br>  <span class="hljs-comment">// 绑定元素的父组件卸载前调用</span><br>  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) &#123;&#125;,<br>  <span class="hljs-comment">// 绑定元素的父组件卸载后调用</span><br>  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-comment">// 自定义指令简化形式</span><br>&lt;div v-color=<span class="hljs-string">&quot;color&quot;</span>&gt;&lt;/div&gt;<br>app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;color&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">el, binding</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 这会在 `mounted` 和 `updated` 时都调用</span><br>  el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = binding.<span class="hljs-property">value</span><br>&#125;)<br></code></pre></td></tr></table></figure>

<p>定义懒加载指令</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// src/directives/index.js</span><br><span class="hljs-comment">// 自定义懒加载指令</span><br><span class="hljs-keyword">import</span> &#123; useIntersectionObserver &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@vueuse/core&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> lazyPlugin = &#123;<br>    <span class="hljs-title function_">install</span>(<span class="hljs-params">app</span>) &#123;<br>        <span class="hljs-comment">// 懒加载指令逻辑</span><br>        app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;lazy-img&#x27;</span>, &#123;<br>            <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) &#123;<br>                <span class="hljs-comment">// el：指令绑定的那个元素 img</span><br>                <span class="hljs-comment">// binding：binding.value 指令等于号后面绑定的表达式的值 图片url</span><br>                <span class="hljs-keyword">const</span> &#123; stop &#125; = <span class="hljs-title function_">useIntersectionObserver</span>(<br>                    el, <span class="hljs-function">(<span class="hljs-params">[&#123; isIntersecting &#125;]</span>) =&gt;</span> &#123;<br>                        <span class="hljs-keyword">if</span> (isIntersecting) &#123;<br>                            <span class="hljs-comment">// 证明进入视口区域</span><br>                            el.<span class="hljs-property">src</span> = binding.<span class="hljs-property">value</span><br>                            <span class="hljs-title function_">stop</span>()<br>                        &#125;<br>                    &#125;<br>                )<br>            &#125;<br>        &#125;)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// mian.js中</span><br><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; lazyPlugin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/directives/index&#x27;</span><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br>app.<span class="hljs-title function_">use</span>(lazyPlugin)<br></code></pre></td></tr></table></figure>



<h1 id="Vue2和3对比"><a href="#Vue2和3对比" class="headerlink" title="Vue2和3对比"></a>Vue2和3对比</h1><h2 id="脚手架创建项目"><a href="#脚手架创建项目" class="headerlink" title="脚手架创建项目"></a>脚手架创建项目</h2><p>问怎么用脚手架创建vue项目。</p>
<blockquote>
<p>❝</p>
<p>2.x</p>
<p>npm install -g vue-cli （npm uninstall -g vue-cli 删）</p>
<p>vue init webpack “项目名称”</p>
<p>进入项目 npm run dev</p>
<p>❞</p>
</blockquote>
<blockquote>
<p>❝</p>
<p>3.x</p>
<p>npm install -g @vue&#x2F;cli （npm uninstall -g @vue&#x2F;cli 删）</p>
<p>或者npm install vue@next(最新最稳定版)</p>
<p>npm install -g @vue&#x2F;cli-init</p>
<p>vue create 项目名称</p>
<p>进入项目 npm run serve</p>
<p>❞</p>
</blockquote>
<h3 id="vue3新特性"><a href="#vue3新特性" class="headerlink" title="vue3新特性"></a>vue3新特性</h3><ol>
<li>支持碎片Fragments，模板可以有多个根元素</li>
<li>提供了composition api，更好的逻辑复用与代码组织</li>
<li>响应式数据声明方式改变</li>
<li>生命周期的改变</li>
<li>父子组件传参不同</li>
<li>vue3 Teleport瞬移组件(类似于react的Portals传送门)</li>
<li>vue3中v-for与v-if,只会把当前v-if当做v-for中的一个判断语句，不会相互冲突</li>
<li>vue3中移除keyCode作为v-on的修饰符，当然也不支持config.keyCodes</li>
<li>vue3中移除过滤器filter</li>
<li>computed和watch变成组合式的</li>
<li>数据响应重新实现（ES6的proxy代替Es5的Object.defineProperty）</li>
<li>源码使用ts重写，更好的类型推导</li>
<li>虚拟DOM新算法（更快，更小）</li>
</ol>
<h4 id="一-响应原理对比"><a href="#一-响应原理对比" class="headerlink" title="一.响应原理对比"></a>一.响应原理对比</h4><p><strong>「vue2使用Object.defineProperty方法实现响应式数据」</strong></p>
<blockquote>
<p>❝</p>
<p>缺点：</p>
<ul>
<li>无法检测到对象属性的动态添加和删除</li>
<li>无法检测到数组的下标和length属性的变更</li>
<li>深度监听需要递归到底，性能层面考虑不太好</li>
</ul>
<p>解决方案：</p>
<ul>
<li>vue2提供Vue.$set动态给对象添加属性</li>
<li>Vue.$delete动态删除对象属性</li>
<li>也可以通过splice解决数组中的问题，object.assign解决批量添加对象属性的问题</li>
</ul>
<p>❞</p>
</blockquote>
<p>Object.defineProperty还存在一个缺点：不能检测数组变化。2.x中是通过重写数组方法实现的对数组的监听。</p>
<p><strong>「vue3使用proxy实现响应式数据」</strong></p>
<blockquote>
<p>❝</p>
<p>优点：</p>
<ul>
<li>可以检测到代理对象属性的动态新增和删除</li>
<li>可以检测数组的下标和length属性的变化</li>
</ul>
<p>缺点：</p>
<ul>
<li>es6的proxy不支持低版本浏览器 IE11</li>
<li>会针对IE11出一个特殊版本进行支持</li>
<li>无法polyfill</li>
</ul>
<p>❞</p>
</blockquote>
<h4 id="二-Composition-API"><a href="#二-Composition-API" class="headerlink" title="二. Composition API"></a>二. Composition API</h4><p>Vue2使用选项类型API（Options API）：选项型API在代码里<strong>「分割了不同的属性」</strong>: data,computed属性，methods，等等。</p>
<p>Vue3使用合成型API（Composition API）：新的合成型API能让我们<strong>「用方法（function）来分割」</strong>，相比于旧的API使用属性来分组，这样代<strong>「码会更加简便和整洁」</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs javascript"> <span class="hljs-comment">// 2.0</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-attr">props</span>: &#123;<br>        <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span><br>    &#125;,<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;&#x27;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">methods</span>: &#123;<br>        <span class="hljs-title function_">login</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-comment">// 登陆方法</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">components</span>: &#123;<br>        <span class="hljs-string">&quot;buttonComponent&quot;</span>: btnComponent<br>    &#125;,<br>    <span class="hljs-attr">computed</span>: &#123;<br>        <span class="hljs-title function_">fullName</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 3.0</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-attr">props</span>: &#123;<br>        <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span><br>    &#125;,<br><br>    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-comment">//数据</span><br>            <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-attr">lowerCaseUsername</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">username</span>.<span class="hljs-title function_">toLowerCase</span>()) <span class="hljs-comment">//计算属性</span><br>        &#125;)<br>        <span class="hljs-comment">//方法</span><br>        <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>            <span class="hljs-comment">// 登陆方法</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> &#123;<br>            login,<br>            state<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="composition-API-解决了什么问题"><a href="#composition-API-解决了什么问题" class="headerlink" title="composition API 解决了什么问题"></a>composition API 解决了什么问题</h5><p><strong>「options API」</strong></p>
<ul>
<li>条例清晰：相同的放在相同的地方，比如方法都放在methods中，状态都在data中</li>
<li>调用时使用this，逻辑过多时this指向不明确</li>
<li>代码分散：一个功能的代码往往散落在不同的options种，比如data methods等等，这也导致新添加功能的时候需要在各种options中反复横跳，这时候如果代码行数较多那是要命的</li>
<li>逻辑过于复杂的场景可以将某个功能代码抽象出mixin，但是这会导致数据来源不明确，在template中有个count变量，你会不知道他到底是来源于data还是mixin还是vue.prototype设置的全局变量。除此之外，如果存在多个mixin还可能存在同名变量被覆盖的问题。</li>
</ul>
<p><strong>「composition API」</strong></p>
<ul>
<li>将一个功能的代码整合到一起，方便开发的同时也便于代码复用。总之就是更好的代码组织方式和更好的代码复用。</li>
<li>没有对this的使用，避免了指向不明确的情况</li>
<li>全部都是函数，更加方便类型推断</li>
</ul>
<h4 id="三-建立数据-data"><a href="#三-建立数据-data" class="headerlink" title="三.建立数据 data"></a>三.建立数据 data</h4><p>VUE2.0中将数据放入到data属性中，在VUE3.0中使用setup()方法，此方法在组件初始化构造的时候触发。</p>
<p>使用以下三步来建立响应式数据:</p>
<ol>
<li>从vue引入reactive</li>
<li>使用reactive()方法来声名我们的数据为响应性数据</li>
<li>使用setup()方法来返回我们的响应性数据，从而template可以获取这些响应性数据</li>
</ol>
<p>可以通过state.username和state.password获得数据的值。</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span> </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">state.username</span> &#125;&#125;</span><span class="language-xml"> <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h4 id="四-碎片"><a href="#四-碎片" class="headerlink" title="四.碎片"></a>四.碎片</h4><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">// 2.0</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&#x27;form-element&#x27;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span> </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">title</span> &#125;&#125;</span><span class="language-xml"> <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">// 3.0</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&#x27;form-element&#x27;</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span> </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">title</span> &#125;&#125;</span><span class="language-xml"> <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h4 id="五-生命周期钩子函数改变"><a href="#五-生命周期钩子函数改变" class="headerlink" title="五.生命周期钩子函数改变"></a>五.生命周期钩子函数改变</h4><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xl">Vue2--------------vue3<br><span class="hljs-function"><span class="hljs-title">beforeCreate</span>  -&gt;</span> setup()开始创建组件之前，在beforeCreate和created之前执行。创建的是<span class="hljs-keyword">data</span>和method<br><span class="hljs-function"><span class="hljs-title">created</span>       -&gt;</span> setup()<br><span class="hljs-function"><span class="hljs-title">beforeMount</span>   -&gt;</span> onBeforeMount 组件挂载到节点上之前执行的函数。<br><span class="hljs-function"><span class="hljs-title">mounted</span>       -&gt;</span> onMounted 组件挂载完成后执行的函数。<br><span class="hljs-function"><span class="hljs-title">beforeUpdate</span>  -&gt;</span> onBeforeUpdate 组件更新之前执行的函数。<br><span class="hljs-function"><span class="hljs-title">updated</span>       -&gt;</span> onUpdated 组件更新完成之后执行的函数。<br><span class="hljs-function"><span class="hljs-title">beforeDestroy</span> -&gt;</span> onBeforeUnmount 组件卸载之前执行的函数。<br><span class="hljs-function"><span class="hljs-title">destroyed</span>     -&gt;</span> onUnmounted 组件卸载完成后执行的函数<br><span class="hljs-function"><span class="hljs-title">activated</span>     -&gt;</span> onActivated 被包含在中的组件，会多出两个生命周期钩子函数。被激活时执行 。<br><span class="hljs-function"><span class="hljs-title">deactivated</span>   -&gt;</span> onDeactivated 比如从 A组件，切换到 B 组件，A 组件消失时执行。<br></code></pre></td></tr></table></figure>

<h4 id="六-父子传参"><a href="#六-父子传参" class="headerlink" title="六.父子传参"></a>六.父子传参</h4><ol>
<li>setup 函数时，它将接受两个参数：（props、context(包含attrs、slots、emit)）</li>
<li>setup函数是处于生命周期函数 beforeCreate 和 Created 两个钩子函数之前的函数</li>
<li>执行 setup 时，组件实例尚未被创建（在 setup() 内部，this 不会是该活跃实例的引用，即不指向vue实例，<strong>「Vue 为了避免我们错误的使用，直接将 setup函数中的this修改成了 undefined」</strong>）</li>
<li>与模板一起使用：需要返回一个对象 (在setup函数中定义的变量和方法最后都是需要 return 出去的不然无法在模板中使用)</li>
<li>使用渲染函数：可以返回一个渲染函数，该函数可以直接使用在同一作用域中声明的响应式状态</li>
<li>setup 函数中的 props 是响应式的，当传入新的 prop 时，它将被更新。但是，因为 props 是响应式的，你<strong>「不能使用 ES6 解构，因为它会消除 prop 的响应性」</strong>。如果需要解构 prop，可以通过<strong>「使用 setup 函数中的toRefs」</strong> 来完成此操作</li>
</ol>
<h5 id="父传子-1"><a href="#父传子-1" class="headerlink" title="父传子"></a>父传子</h5><p>所以当父组件向子组件中传递，和2.x版本中没有太多区别，但是如果需要从props中派生处数据时，需要从setup函数中接收。</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">// 父组件</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">Son</span> <span class="hljs-attr">:msg</span>=<span class="hljs-string">&quot;state.msg&quot;</span>/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/transParams/Son&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123;reactive&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Parent&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">components</span>: &#123;<span class="hljs-title class_">Son</span>&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> state =<span class="hljs-title function_">reactive</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">msg</span>:<span class="hljs-string">&#x27;父组件传递给子组件的参数&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;);</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      state</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">// 子组件</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>这里是子组件啦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>这里是父组件传递过来的值呀：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">msg</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Son&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">props</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">msg</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">type</span>:<span class="hljs-title class_">String</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">default</span>:<span class="hljs-string">&#x27;&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">setup</span>(<span class="hljs-params">props</span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props) <span class="hljs-comment">//Proxy &#123;msg: &#x27;父组件传递给子组件的参数&#x27;&#125;</span></span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h5 id="子传父（emit-event）"><a href="#子传父（emit-event）" class="headerlink" title="子传父（emit event）"></a>子传父（emit event）</h5><p>子组件向父组件传递至差别比较大：</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">//父组件</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>这里是父组件啦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>这里是子组件传递过来的值呀：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">state.sonMsg</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>/&gt;</span> </span><br><span class="language-xml">  <span class="hljs-comment">&lt;!-- 子传父：定义子组件emit时的函数sonSendMsg，并且绑定到父组件中注册的receiveMessageFromSon函数 --&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">Son</span> @<span class="hljs-attr">sonSendMsg</span>=<span class="hljs-string">&quot;receiveMessageFromSon&quot;</span> <span class="hljs-attr">:msg</span>=<span class="hljs-string">&quot;state.msg&quot;</span>/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/transParams/Son&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123;reactive&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Parent&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">components</span>: &#123;<span class="hljs-title class_">Son</span>&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> state =<span class="hljs-title function_">reactive</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">msg</span>:<span class="hljs-string">&#x27;父组件传递给子组件的参数&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">sonMsg</span>:<span class="hljs-string">&#x27;&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;);</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">//子传父：定义接收函数</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">receiveMessageFromSon</span> =(<span class="hljs-params">data</span>)=&gt;&#123;</span></span><br><span class="language-javascript"><span class="language-xml">      state.<span class="hljs-property">sonMsg</span>=data.<span class="hljs-property">sonMsg</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      state,</span></span><br><span class="language-javascript"><span class="language-xml">      receiveMessageFromSon</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">// 子组件</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>这里是子组件啦<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sendMsgToParent&quot;</span>&gt;</span>向父组件传递数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>这里是父组件传递过来的值呀：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">msg</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Son&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-comment">//差别一：子组件向父组件传值要注册emits</span></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">emits</span>:[<span class="hljs-string">&#x27;sonSendMsg&#x27;</span>],</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">props</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">msg</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">type</span>:<span class="hljs-title class_">String</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">default</span>:<span class="hljs-string">&#x27;&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">setup</span>(<span class="hljs-params">props,&#123; attrs, slots, emit &#125;</span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMsgToParent</span> =(<span class="hljs-params"></span>)=&gt;&#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-comment">// 差别二：向父组件传递参数：不再通过this.$emit触发函数</span></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;sonSendMsg&#x27;</span>, &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">sonMsg</span>:<span class="hljs-string">&#x27;子组件传递过来的数据&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">      &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      sendMsgToParent</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p><strong>「setup函数只能是同步的不能是异步的」</strong></p>
<h4 id="七-vue3-Teleport瞬移组件"><a href="#七-vue3-Teleport瞬移组件" class="headerlink" title="七.vue3 Teleport瞬移组件"></a>七.vue3 Teleport瞬移组件</h4><p>类比react中的传送门将组件挂载到想挂载的DOM上。</p>
<p>比如创建一个modal组件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;#modal&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;center&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;isOpen&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span>this is a modal<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;buttonClick&quot;</span>&gt;</span>Close<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">teleport</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;TeleportComponent&quot;</span>,</span><br><span class="language-javascript">  <span class="hljs-attr">props</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">isOpen</span>: <span class="hljs-title class_">Boolean</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">closeModal</span>:<span class="hljs-title class_">Function</span></span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-attr">emits</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-string">&#x27;closeModal&#x27;</span>: <span class="hljs-literal">null</span></span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-title function_">setup</span>(<span class="hljs-params">props, context</span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">buttonClick</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">      context.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;closeModal&#x27;</span>)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      buttonClick</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-id">#center</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid black;</span><br><span class="language-css">  <span class="hljs-attribute">background</span>: white;</span><br><span class="language-css">  <span class="hljs-attribute">position</span>: fixed;</span><br><span class="language-css">  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">  <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">100px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">100px</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span> <br></code></pre></td></tr></table></figure>

<p>使用方法如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;modal&quot;</span>&gt;</span>这是modal即将挂载的元素<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showModal&quot;</span>&gt;</span>点击我，打开Modal<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">teleport-component</span> <span class="hljs-attr">:isOpen</span>=<span class="hljs-string">&quot;isModalOpen&quot;</span> <span class="hljs-attr">:closeModal</span>=<span class="hljs-string">&quot;closeModal&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">TeleportComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/TeleportComponent.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;TeleportPage&quot;</span>,</span><br><span class="language-javascript">  <span class="hljs-attr">components</span>:&#123;<span class="hljs-title class_">TeleportComponent</span>&#125;,</span><br><span class="language-javascript">  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> isModalOpen = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> closeModal = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">      isModalOpen.<span class="hljs-property">value</span>=<span class="hljs-literal">false</span></span><br><span class="language-javascript">    &#125;;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> showModal = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">      isModalOpen.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      closeModal,isModalOpen,showModal</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>使用方式有两个，第一个是在app.vue中使用，但是这样存在的问题是：<strong>「modal是在app的 DOM节点之下的,父节点的dom结构和css都会给modal产生影响」</strong>。</p>
<p>为了避免这个问题，我们可以在public文件夹下的index.html中增加一个节点<code>&lt;div id=&quot;modal&quot;&gt;&lt;/div&gt;</code>，这样可以看到modal组件就是没有挂载在app下,不再受app组件的影响了</p>
<h4 id="八-computed和watch"><a href="#八-computed和watch" class="headerlink" title="八.computed和watch"></a>八.computed和watch</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//2.0中</span><br><span class="hljs-attr">computed</span>:&#123;  <span class="hljs-comment">//计算属性</span><br>            <span class="hljs-title function_">_suming</span>(<span class="hljs-params"></span>)&#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">one</span>)+<span class="hljs-built_in">parseInt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">two</span>)<br>            &#125;,<br>            <span class="hljs-title function_">dataTimeing</span>(<span class="hljs-params"></span>)&#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;计算属性方法&quot;</span>);<br>                <span class="hljs-comment">// return &quot;计算属性方法&quot;+new Date()</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;普通方法&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">time</span><br>            &#125;<br>        &#125;,<br><br><span class="hljs-attr">watch</span>: &#123;<br>            <span class="hljs-attr">userName</span>: &#123;<br>                <span class="hljs-title function_">handler</span>(<span class="hljs-params">val,res</span>)&#123;<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val);<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);<br>                &#125;,<br>                <span class="hljs-attr">immediate</span>:<span class="hljs-literal">true</span>,<br>                <span class="hljs-attr">deep</span>:<span class="hljs-literal">true</span><br>            &#125;,<br>            <br>        &#125;<br><br><span class="hljs-comment">//3.0中</span><br>&lt;template&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>my firstName is : &#123;&#123; nameObj.firstName &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>my lastName is : &#123;&#123; nameObj.lastName &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>my fullName is : &#123;&#123; fullName &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>my desc : &#123;&#123; nameObj.desc &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeLastName&quot;</span>&gt;</span>click me to add a &#x27;!&#x27; to lastName<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>打开控制台可以查看watch的情况<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeHobby&quot;</span>&gt;</span>修改hobby,测试深度监听<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123; computed, reactive, watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ComputedAndWatch&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">const</span> nameObj = <span class="hljs-title function_">reactive</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">firstName</span>: <span class="hljs-string">&#x27;Forever&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">lastName</span>: <span class="hljs-string">&#x27;Young&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">hobby</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-attr">ball</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">                    <span class="hljs-attr">isLike</span>: <span class="hljs-literal">false</span></span></span><br><span class="language-javascript"><span class="language-xml">                &#125;</span></span><br><span class="language-javascript"><span class="language-xml">            &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;);</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 计算属性</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">const</span> fullName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;nameObj.firstName&#125;</span>_<span class="hljs-subst">$&#123;nameObj.lastName&#125;</span>`</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        nameObj.<span class="hljs-property">desc</span> = <span class="hljs-title function_">computed</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-keyword">return</span> <span class="hljs-string">`my name is <span class="hljs-subst">$&#123;nameObj.firstName&#125;</span>_<span class="hljs-subst">$&#123;nameObj.lastName&#125;</span>`</span></span></span><br><span class="language-javascript"><span class="language-xml">            &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-comment">// 此处的set好像没生效</span></span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;set&#x27;</span>, value)</span></span><br><span class="language-javascript"><span class="language-xml">            &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">const</span> changeLastName = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            nameObj.<span class="hljs-property">lastName</span> = nameObj.<span class="hljs-property">lastName</span> + <span class="hljs-string">&#x27;!&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 监听属性</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 可以深度监听到isLike属性的变化</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">watch</span>(nameObj, <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;watch nameObj 改变了&#x27;</span>, newVal)</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 只有更改nameObj.lastName会触发这个watch</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">watch</span>(<span class="hljs-function">()=&gt;</span>nameObj.<span class="hljs-property">lastName</span>, <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;watch nameObj.lastName&#x27;</span>, newVal)</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">const</span> changeHobby = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            nameObj.<span class="hljs-property">hobby</span>.<span class="hljs-property">ball</span>.<span class="hljs-property">isLike</span> = !nameObj.<span class="hljs-property">hobby</span>.<span class="hljs-property">ball</span>.<span class="hljs-property">isLike</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            nameObj,</span></span><br><span class="language-javascript"><span class="language-xml">            fullName,</span></span><br><span class="language-javascript"><span class="language-xml">            changeLastName,</span></span><br><span class="language-javascript"><span class="language-xml">            changeHobby</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>如果需要监听深度属性怎么办呢，我们都知道reactive是响应式数据属性，如果这个属性是对象，那么我们就可以开启深度监听</p>
<p>注意：我理解这不应该说成是深度监听，只能说是监听某个属性。由上述代码可以看出直接监听nameObj就可以监听到他内部isLike属性的变化，我觉得这已经足够深度监听了</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-regexp">//</span>第一种<br>watch(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span> names.job.salary,<span class="hljs-function"><span class="hljs-params">(newValue,oldValue)</span>=&gt;</span>&#123;<br>  console.log(<span class="hljs-string">&#x27;names改变了&#x27;</span>,newValue,oldValue)<br>&#125;)<br><span class="hljs-regexp">//</span>第二种<br>watch(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span> names.job,<span class="hljs-function"><span class="hljs-params">(newValue,oldValue)</span>=&gt;</span>&#123;<br>  console.log(<span class="hljs-string">&#x27;names改变了&#x27;</span>,newValue,oldValue)<br>&#125;,&#123;deep:<span class="hljs-literal">true</span>&#125;)<br></code></pre></td></tr></table></figure>

<h4 id="九-defineProperty实现响应式"><a href="#九-defineProperty实现响应式" class="headerlink" title="九.defineProperty实现响应式"></a>九.defineProperty实现响应式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 触发更新视图</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateView</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;视图更新啦啦啦&#x27;</span>)<br>&#125;<br><br><span class="hljs-comment">// -------------------------处理数组start-------------------</span><br><span class="hljs-comment">// 重新定义数组原型</span><br><span class="hljs-keyword">const</span> oldArrayProperty = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span><br><span class="hljs-comment">// 创建新的对象,原型指向oldArrayProperty,在扩展新的方法不会影响原型</span><br><span class="hljs-comment">// Array.prototype.push=function()&#123;&#125; 会污染全局</span><br><span class="hljs-keyword">const</span> arrProto = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(oldArrayProperty);<br><span class="hljs-comment">//重写数组方法，弥补不能监听数组变化的缺陷</span><br>[<span class="hljs-string">&#x27;push&#x27;</span>, <span class="hljs-string">&#x27;pop&#x27;</span>, <span class="hljs-string">&#x27;shift&#x27;</span>, <span class="hljs-string">&#x27;unshift&#x27;</span>, <span class="hljs-string">&#x27;splice&#x27;</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">methodsName</span> =&gt;</span> &#123;<br>    arrProto[methodsName] = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">updateView</span>()<span class="hljs-comment">//更新视图</span><br>        oldArrayProperty[methodsName].<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, ...<span class="hljs-variable language_">arguments</span>)<br>    &#125;<br>&#125;)<br><span class="hljs-comment">// -------------------------处理数组end-------------------</span><br><br><br><span class="hljs-comment">// 重新定义属性，监听起来</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">defineReactive</span>(<span class="hljs-params">target, key, value</span>) &#123;<br>    <span class="hljs-comment">// 深度监听-递归处理，在性能上有影响</span><br>    <span class="hljs-title function_">observer</span>(value)<br><br>    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, key, &#123;<br>        <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">return</span> value<br>        &#125;,<br>        <span class="hljs-title function_">set</span>(<span class="hljs-params">newVal</span>) &#123;<br>            <span class="hljs-keyword">if</span> (newVal !== value) &#123;<br>                <span class="hljs-comment">// 设置新值，深度监听</span><br>                <span class="hljs-title function_">observer</span>(newVal)<br><br>                value = newVal<br>                <span class="hljs-comment">// 触发视图更新</span><br>                <span class="hljs-title function_">updateView</span>()<br>            &#125;<br>        &#125;<br>    &#125;)<br><br>&#125;<br><br><span class="hljs-comment">// 监听对象属性</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">observer</span>(<span class="hljs-params">target</span>) &#123;<br>    <br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target !== <span class="hljs-string">&#x27;object&#x27;</span> || target === <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// 不是对象或者数组</span><br>        <span class="hljs-keyword">return</span> target<br>    &#125;<br>    <span class="hljs-comment">// -------------------------处理数组start-------------------</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(target)) &#123;<br>        target.<span class="hljs-property">__proto__</span> = arrProto<br>    &#125;<br>    <span class="hljs-comment">// -------------------------处理数组end-------------------</span><br><br>    <span class="hljs-comment">// 重新定义属性,for-in可以遍历数组</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> target) &#123; <br>        <span class="hljs-title function_">defineReactive</span>(target, key, target[key])<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">// 准备数据</span><br><span class="hljs-keyword">const</span> data = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;jerry&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">info</span>: &#123;<br>        <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;beijing&#x27;</span><span class="hljs-comment">//深度监听</span><br>    &#125;,<br>    <span class="hljs-attr">nums</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br>&#125;<br><br><span class="hljs-comment">// 监听数据</span><br><span class="hljs-title function_">observer</span>(data)<br><br><span class="hljs-comment">// 测试</span><br><span class="hljs-comment">// data.name = &#x27;tom&#x27;</span><br><span class="hljs-comment">// console.log(&#x27;更新后名字&#x27;,data.name)</span><br><span class="hljs-comment">// data.age = 20</span><br><br><span class="hljs-comment">// // 深度监听</span><br><span class="hljs-comment">// data.info.address = &#x27;唐山&#x27;</span><br><br><span class="hljs-comment">// // 设置新值深度监听</span><br><span class="hljs-comment">// data.age = &#123; num: 21 &#125;</span><br><span class="hljs-comment">// data.age.num = 22</span><br><br><span class="hljs-comment">// delete data.name// 删除属性监听不到</span><br><span class="hljs-comment">// data.x = &#x27;新增属性&#x27;//新增属性监听不到</span><br><br><span class="hljs-comment">// 数组监听</span><br>data.<span class="hljs-property">nums</span>.<span class="hljs-title function_">push</span>(<span class="hljs-number">5</span>)<br></code></pre></td></tr></table></figure>

<h4 id="十-proxy实现响应式"><a href="#十-proxy实现响应式" class="headerlink" title="十.proxy实现响应式"></a>十.proxy实现响应式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">target = &#123;&#125;</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target !== <span class="hljs-string">&#x27;object&#x27;</span> || target == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// 不是数组或者对象</span><br>        <span class="hljs-keyword">return</span> target<br>    &#125;<br><br>    <span class="hljs-comment">// 代理配置</span><br>    <span class="hljs-keyword">const</span> proxyConf = &#123;<br>        <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) &#123;<br>            <span class="hljs-comment">// 只处理非原型的属性</span><br>            <span class="hljs-keyword">const</span> ownKeys = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(target)<br>            <span class="hljs-keyword">if</span> (ownKeys.<span class="hljs-title function_">includes</span>(key)) &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;get&#x27;</span>, key)<br>            &#125;<br><br>            <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;get&#x27;</span>, key)<br>            <span class="hljs-comment">// return result //返回结果</span><br>            <span class="hljs-comment">//深度监听</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">reactive</span>(result)<br>        &#125;,<br>        <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, val, receiver</span>) &#123;<br>            <span class="hljs-comment">// 不重复修改数据</span><br>            <span class="hljs-keyword">const</span> oldVal = target[key]<br>            <span class="hljs-keyword">if</span> (oldVal === val) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>            &#125;<br>            <br>            <span class="hljs-comment">// 区别已有的key还是新增的key</span><br>            <span class="hljs-keyword">const</span> ownKeys = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">ownKeys</span>(target)<br>            <span class="hljs-keyword">if</span> (ownKeys.<span class="hljs-title function_">includes</span>(key)) &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;已有的key&#x27;</span>, key)<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;新增的key&#x27;</span>, key)<br>            &#125;<br><br>            <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, val, receiver)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;set&#x27;</span>, key, val)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;set-result&#x27;</span>, result)<br>            <span class="hljs-keyword">return</span> result <span class="hljs-comment">//是否设置成功</span><br>        &#125;,<br>        <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, key</span>) &#123;<br>            <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, key)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;deleteProperty&#x27;</span>, key)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;delete result&#x27;</span>, result)<br>            <span class="hljs-keyword">return</span> result <span class="hljs-comment">//是否删除成功</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 生成代理对象</span><br>    <span class="hljs-keyword">const</span> observed = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, proxyConf)<br>    <span class="hljs-keyword">return</span> observed<br>&#125;<br><br><br><span class="hljs-comment">// 测试数据</span><br><span class="hljs-keyword">const</span> data = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;jerry&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">info</span>: &#123;<br>        <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;beijing&#x27;</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">// const data = [1, 2, 3]</span><br><br><span class="hljs-keyword">const</span> proxyData = <span class="hljs-title function_">reactive</span>(data)<br></code></pre></td></tr></table></figure>

<h2 id="vue3中ref与reactive"><a href="#vue3中ref与reactive" class="headerlink" title="vue3中ref与reactive"></a>vue3中ref与reactive</h2><p>使用ref例子如下：</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>姓名：</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">name</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>年龄：</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">age</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>职业：</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">job.occupation</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>薪资：</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">job.salary</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;change&quot;</span>&gt;</span>修改薪资和年龄<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;deepChange&quot;</span>&gt;</span>检测深度监听<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123; is &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@babel/types&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123; ref,watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;RefAndReactive&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;中介&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> age = <span class="hljs-title function_">ref</span>(<span class="hljs-number">18</span>)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">let</span> job = <span class="hljs-title function_">ref</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">occupation</span>: <span class="hljs-string">&#x27;程序员&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">salary</span>: <span class="hljs-string">&#x27;10k&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">up</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml">                <span class="hljs-attr">isUp</span>:<span class="hljs-literal">true</span></span></span><br><span class="language-javascript"><span class="language-xml">            &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 直接监听job监听不到isUp的变化</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">watch</span>(<span class="hljs-function">()=&gt;</span>job.<span class="hljs-property">value</span>.<span class="hljs-property">up</span>.<span class="hljs-property">isUp</span>,<span class="hljs-function">(<span class="hljs-params">newVal</span>)=&gt;</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;watch&#x27;</span>,newVal)</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">//方法</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">change</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            job.<span class="hljs-property">value</span>.<span class="hljs-property">salary</span> = <span class="hljs-string">&#x27;12k&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">            age.<span class="hljs-property">value</span> = <span class="hljs-number">19</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">deepChange</span>(<span class="hljs-params"></span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            job.<span class="hljs-property">value</span>.<span class="hljs-property">up</span>.<span class="hljs-property">isUp</span> = !job.<span class="hljs-property">value</span>.<span class="hljs-property">up</span>.<span class="hljs-property">isUp</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            name,</span></span><br><span class="language-javascript"><span class="language-xml">            age,</span></span><br><span class="language-javascript"><span class="language-xml">            job,</span></span><br><span class="language-javascript"><span class="language-xml">            change,</span></span><br><span class="language-javascript"><span class="language-xml">            deepChange</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p><strong>「ref与reactive区别」</strong></p>
<ol>
<li>ref定义的是基本数据类型</li>
<li>ref通过Object.defineProperty()的get和set实现数据劫持（如果参数是对象类型时，其实底层的本质还是reactive,系统会自动根据我们给ref传入的值转换成reactive）</li>
<li>ref操作数据.value，读取时不需要.value</li>
<li>reactive定义对象或数组数据类型</li>
<li>reactive通过Proxy实现数据劫持</li>
<li>reactive操作和读取数据不需要.value</li>
<li>监听深度不同</li>
</ol>
<h2 id="nextTick-实现原理"><a href="#nextTick-实现原理" class="headerlink" title="$nextTick 实现原理"></a>$nextTick 实现原理</h2><p><code>nextTick</code>存在的原因是<code>Vue</code> 在更新 <code>DOM</code> 时是<strong>「异步执行的」</strong>。只要侦听到数据变化，<code>Vue</code>将<strong>「开启一个队列」</strong>，并缓冲在同一事件循环中发生的所有数据变更。如果同一个 watcher 被多次触发，<strong>「只会被推入到队列中一次」</strong>。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作是非常重要的。然后，在<strong>「下一个的事件循环」</strong>“tick”中，<code>Vue</code> 刷新队列并执行实际 (已去重的) 工作。<code>Vue</code> 在内部对异步队列尝试使用原生的 <code>Promise.then</code>、<code>MutationObserver</code> 和 <code>setImmediate</code>，如果执行环境不支持，则会采用 <code>setTimeout(fn, 0)</code> 代替。</p>
<p><code>nextTick</code>具体实现过程为：</p>
<ol>
<li>将回调函数添加到callbacks中等待执行</li>
<li>将执行函数放入到宏任务(<code>setImediate或者setTimeout</code>)或者微任务(<code>promise,mutationObserver</code>)中</li>
<li>事件循环到了微任务或者宏任务，执行函数依次执行callbacks中的回调</li>
</ol>
<p>可以看出来<code>nextTick</code>是对<code>setTimeout</code>进行了多种兼容性的处理，宽泛的也可以理解为将回调函数放入<code>setTimeout</code>中执行；不过<code>nextTick</code>优先放入微任务执行，而<code>setTimeout</code>是宏任务，因此<code>nextTick</code>一般情况下总是先于<code>setTimeout</code>执行</p>
<p>源码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> pending = <span class="hljs-literal">false</span>;<br><span class="hljs-keyword">let</span> callbacks = []; <span class="hljs-comment">//存放的是回调函数，存放的第一个回调函数是数据更新的回调函数</span><br><span class="hljs-keyword">let</span> timerFunc = <span class="hljs-literal">null</span>;<br><br><span class="hljs-comment">//调用this.$nextTick时执行的函数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">nextTick</span>(<span class="hljs-params">cb, ctx</span>) &#123;<br>  <span class="hljs-keyword">var</span> _resolve;<br>  <span class="hljs-comment">// 将回调函数已添加到callbacks</span><br>  callbacks.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (cb) &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>        cb.<span class="hljs-title function_">call</span>(ctx);<br>      &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-title function_">handleError</span>(e, ctx, <span class="hljs-string">&#x27;nextTick&#x27;</span>);<br>      &#125;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_resolve) &#123;<br>      <span class="hljs-title function_">_resolve</span>(ctx);<br>    &#125;<br>  &#125;);<br>  <span class="hljs-comment">//在数据首次修改时，pending为false，修改后，pending变成true</span><br>  <span class="hljs-keyword">if</span> (!pending) &#123;<br>    pending = <span class="hljs-literal">true</span>;<br>    <span class="hljs-comment">//在这里用到了事件循环</span><br>    <span class="hljs-title function_">timerFunc</span>();<br>  &#125;<br>  <span class="hljs-comment">// $flow-disable-line</span><br>  <span class="hljs-keyword">if</span> (!cb &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Promise</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>      _resolve = resolve;<br>    &#125;)<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//定义eventLoop函数---借助promise,mutationObserver,setImediate或者setTimeout将函数添加到事件循环的宏任务或者微任务中</span><br><span class="hljs-comment">// 判断是否支持promise</span><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Promise</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="hljs-title function_">isNative</span>(<span class="hljs-title class_">Promise</span>)) &#123;<br>  <span class="hljs-keyword">var</span> p = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>();<br>  timerFunc = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    p.<span class="hljs-title function_">then</span>(flushCallbacks);<br><br>    <span class="hljs-keyword">if</span> (isIOS) &#123; <span class="hljs-built_in">setTimeout</span>(noop); &#125;<br>  &#125;;<br>  isUsingMicroTask = <span class="hljs-literal">true</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!isIE &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MutationObserver</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; (<br>  <span class="hljs-comment">// 判断是否支持MutationObserver</span><br>  <span class="hljs-title function_">isNative</span>(<span class="hljs-title class_">MutationObserver</span>) ||<br>  <span class="hljs-comment">// PhantomJS and iOS 7.x</span><br>  <span class="hljs-title class_">MutationObserver</span>.<span class="hljs-title function_">toString</span>() === <span class="hljs-string">&#x27;[object MutationObserverConstructor]&#x27;</span><br>)) &#123;<br>  <span class="hljs-keyword">var</span> counter = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">var</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(flushCallbacks);<br>  <span class="hljs-keyword">var</span> textNode = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(<span class="hljs-title class_">String</span>(counter));<br>  observer.<span class="hljs-title function_">observe</span>(textNode, &#123;<br>    <span class="hljs-attr">characterData</span>: <span class="hljs-literal">true</span><br>  &#125;);<br>  timerFunc = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    counter = (counter + <span class="hljs-number">1</span>) % <span class="hljs-number">2</span>;<br>    textNode.<span class="hljs-property">data</span> = <span class="hljs-title class_">String</span>(counter);<br>  &#125;;<br>  isUsingMicroTask = <span class="hljs-literal">true</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> setImmediate !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="hljs-title function_">isNative</span>(setImmediate)) &#123;<br>  <span class="hljs-comment">// 判断是否支持setImmediate</span><br>  timerFunc = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">setImmediate</span>(flushCallbacks);<br>  &#125;;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-comment">// 前几项都不支持则使用setTimeout</span><br>  timerFunc = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(flushCallbacks, <span class="hljs-number">0</span>);<br>  &#125;;<br>&#125;<br><br><span class="hljs-comment">//清空事件队列中的回调函数，第一个回调函数是flushSchedulerQueue ()</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">flushCallbacks</span>(<span class="hljs-params"></span>) &#123;<br>  pending = <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">var</span> copies = callbacks.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>);<br>  callbacks.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; copies.<span class="hljs-property">length</span>; i++) &#123;<br>    copies[i]();<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//flushSchedulerQueue的核心代码，执行数据更新操作</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">flushSchedulerQueue</span>(<span class="hljs-params"></span>) &#123;<br>  currentFlushTimestamp = <span class="hljs-title function_">getNow</span>();<br>  flushing = <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">var</span> watcher, id;<br>  queue.<span class="hljs-title function_">sort</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) &#123; <span class="hljs-keyword">return</span> a.<span class="hljs-property">id</span> - b.<span class="hljs-property">id</span>; &#125;);<br>  <span class="hljs-keyword">for</span> (index = <span class="hljs-number">0</span>; index &lt; queue.<span class="hljs-property">length</span>; index++) &#123;<br>    watcher = queue[index];<br>    <span class="hljs-keyword">if</span> (watcher.<span class="hljs-property">before</span>) &#123;<br>      <span class="hljs-comment">//调用beforeUpdate()钩子函数</span><br>      watcher.<span class="hljs-title function_">before</span>();<br>    &#125;<br>    id = watcher.<span class="hljs-property">id</span>;<br>    has[id] = <span class="hljs-literal">null</span>;<br>    <span class="hljs-comment">//执行更新</span><br>    watcher.<span class="hljs-title function_">run</span>();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="v-for中没有key和有key两种情况，diff算法怎么比较"><a href="#v-for中没有key和有key两种情况，diff算法怎么比较" class="headerlink" title="v-for中没有key和有key两种情况，diff算法怎么比较"></a>v-for中没有key和有key两种情况，diff算法怎么比较</h2><h3 id="diff算法"><a href="#diff算法" class="headerlink" title="diff算法"></a>diff算法</h3><p>diff算法主要进行虚拟DOM的对比，找出差异，减少不必要的dom操作。</p>
<p>两个 js 对象或者两棵树都可以进行diff，但是两棵树的diff复杂度达到O(n^3)，基本上不可用。</p>
<p>所以需要优化：</p>
<ul>
<li>只对比同一层的节点，不跨级比较</li>
<li>tag不同则删除重建，不进行深层</li>
<li>tag和key都相同，认为是同一节点，不深度比较</li>
</ul>
<h3 id="用到的重要函数"><a href="#用到的重要函数" class="headerlink" title="用到的重要函数"></a>用到的重要函数</h3><ul>
<li>h函数，生成VNode</li>
<li>patch函数，接受两个参数，第一个是<code>VNode</code>或者<code>element</code>，第二个是<code>VNode</code></li>
<li><code>sameVnode</code>函数，接受两个<code>vnode</code>，判断两者的key和<code>sel</code>(即tag)是否相同，返回boolean值</li>
</ul>
<h3 id="patch函数"><a href="#patch函数" class="headerlink" title="patch函数"></a>patch函数</h3><ul>
<li><p>第一个参数不是<code>vnode</code>， 创建一个空的<code>vnode</code>并关联到这个<code>element</code></p>
</li>
<li><p>两个参数都是<code>vnode</code>：</p>
</li>
<li><ul>
<li>两个<code>VNode</code>相同(<code>sameVnode</code>返回true)：<code>patchVnode</code>对比节点文本变化或子节点变化</li>
<li>两个<code>VNode</code>不同：创建新的<code>VNode</code>，插入到<code>VDom</code></li>
</ul>
</li>
</ul>
<h3 id="pacthVnode"><a href="#pacthVnode" class="headerlink" title="pacthVnode"></a>pacthVnode</h3><p>主要作用是对比两个<code>VNode</code>。</p>
<ul>
<li><p><code>old === new return</code></p>
</li>
<li><p><code>new.text === undefined</code> （这<strong>「基本上」</strong>意味着<strong>「新节点的children不为空」</strong>）</p>
</li>
<li><ul>
<li>旧节点有children：<code>updateChildren</code></li>
<li>旧节点没有children：旧节点的text设置为空，然后<code>addNodes</code>添加children</li>
<li>旧节点有text：清空text</li>
</ul>
</li>
<li><p><code>new.text !== undefined</code>（新节点的children不存在）</p>
</li>
<li><ul>
<li><code>old.text !== new.text</code> 删除旧节点的children，设置新的节点的<code>text</code></li>
</ul>
</li>
</ul>
<h3 id="updateChildren"><a href="#updateChildren" class="headerlink" title="updateChildren"></a>updateChildren</h3><p>维持四个指针：</p>
<ul>
<li>新children的开始</li>
<li>新children的结束</li>
<li>旧children的开始</li>
<li>旧children的结束</li>
</ul>
<p>两两对比(<code>sameVnode</code>)：</p>
<ul>
<li><p>新的开始和旧的开始</p>
</li>
<li><p>新的开始和旧的结束</p>
</li>
<li><p>新的结束和旧的结束</p>
</li>
<li><p>新的结束和旧的开始</p>
</li>
<li><p>以上四个判断命中的话：<code>pacthVnode</code> 并且移动指针</p>
</li>
<li><p>以上四个均未命中：</p>
</li>
<li><ul>
<li>没对应上：创建新的<code>vnode</code>并插入</li>
<li>对应上了：找到对应旧节点，看<code>sel</code>是否相同</li>
</ul>
</li>
<li><ul>
<li>不相同就创建新的<code>vnode</code>并且插入</li>
<li>相同：<code>patchVnode</code></li>
</ul>
</li>
<li><ul>
<li>对比当前新节点的key是否对应旧节点的某个key</li>
</ul>
</li>
</ul>
<p>在没有 Key 的情况下。<code>sameVnode</code> 下的 key 都是 undefined ，所以是相同的</p>
<h3 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h3><p>先说出diff本来已经存在以及遍历两棵树时，时间复杂度的问题以及优化。</p>
<p>vue维持四个指针相互进行比较，比较过程通过key和tag判断节点是否相同。</p>
<p>有key的情况下：key不同则认为两节点不同，没必要比较子节点直接销毁重建；</p>
<p>没有key时：明明两个节点不同但是由于他们的key都是undefined，此时如果tag相同，那么就会认为是相同节点，会去比较深层的节点</p>
<h2 id="keep-alive实现原理"><a href="#keep-alive实现原理" class="headerlink" title="keep-alive实现原理"></a>keep-alive实现原理</h2><p>keep-alive组件的props维持includes，excludes和max分别表示要缓存的组件，不缓存的组件和缓存的最大值。</p>
<p>在created里边初始化cache和keys来存储已经保存的vnode和响应的keys。</p>
<p>在mounted里边监听includes和excludes 来实时更新cache和keys。</p>
<p>渲染的时候首先会找到keep-alive第一个子组件对象以及他的name，然后检查：是否满足<code>不在include或者在exclude中</code>（也就是检查是否满足不需要缓存组件），如果满足的话直接返回vnode，不满足的话（需要缓存）根据tag和ID生成缓存key，检查是否已经被缓存过，如果已经缓存过那就取出缓存并且更新key在keys中的位置，以便达到max时做资源置换，如果没缓存过，那就缓存到cache中，然后检测已缓存的实例对象是否达到max，已经达到的话按照LRU置换策略舍弃掉最近最不常用的那个（index&#x3D;&#x3D;&#x3D;0的那个），keep-alive设置为true。</p>
<h2 id="vue-router和window-location跳转的区别-对浏览器来讲"><a href="#vue-router和window-location跳转的区别-对浏览器来讲" class="headerlink" title="vue-router和window.location跳转的区别(对浏览器来讲)"></a>vue-router和window.location跳转的区别(对浏览器来讲)</h2><ol>
<li>vue-router使用pushState进行路由更新，<strong>「静态跳转，页面不会重新加载」</strong>；location.href会触发浏览器<strong>「页面重新加载」</strong>一次</li>
<li>vue-router使用diff算法，实现按需加载，减少dom操作</li>
<li>vue-router是路由跳转或同一个<strong>「页面跳转」</strong>；location.href是不同页面间跳转；</li>
<li>vue-router是<strong>「异步加载」</strong>this.$nextTick(()&#x3D;&gt;{获取url})；location.href是同步加载</li>
</ol>
<h2 id="Vue如何进行组件封装"><a href="#Vue如何进行组件封装" class="headerlink" title="Vue如何进行组件封装"></a>Vue如何进行组件封装</h2><p>组件封装基本上需要考虑三个方面：</p>
<ol>
<li>props：外部传递给组件的数据</li>
<li>事件：组件触发外部的方法</li>
<li>slot：外部注入到组件的视图</li>
</ol>
<p>具体使用：</p>
<ol>
<li><p>定义组件，像普通页面那样；</p>
</li>
<li><p>局部使用：在使用的页面中import，之后在components中注册；</p>
<p>全局使用：在<code>main.js</code>中引入，然后使用<code>Vue.component(组件名，组件)</code></p>
</li>
</ol>
<h2 id="双向数据绑定的机制"><a href="#双向数据绑定的机制" class="headerlink" title="双向数据绑定的机制"></a>双向数据绑定的机制</h2><p>Vuejs的数据驱动是通过MVVM这种框架来实现的。MVVM框架主要包含3个部分:model、view和 viewModel。</p>
<ul>
<li>Model:指的是数据部分，对应到前端就是javascript对象</li>
<li>View:指的是视图部分，对应前端就是dom</li>
<li>ViewModel:就是连接视图与数据的中间件</li>
</ul>
<p>ViewModel是实现数据驱动视图的核心，当数据变化的时候，ViewModel能够监听到这种变化，并及时的通知view做出修改。同样的，当页面有事件触发时，ViewModel也能够监听到事件，并通知model进行响应。ViewModel就相当于一个观察者，监控着双方的动作，并及时通知对方进行相应的操作。</p>
<p>首先，vuejs在实例化的过程中，会对遍历传给实例化对象选项中的data 选项，遍历其所有属性并使用 Object.defineProperty 把这些属性全部转为 getter&#x2F;setter。</p>
<p>同时每一个实例对象都有一个watcher实例对象，他会在模板编译的过程中,用getter去访问data的属性，watcher此时就会把用到的data属性记为依赖，这样就建立了视图与数据之间的联系。当之后我们渲染视图的数据依赖发生改变（即数据的setter被调用）的时候，watcher会对比前后两个的数值是否发生变化，然后确定是否通知视图进行重新渲染。这样就实现了所谓的数据对于视图的驱动。</p>
<h2 id="vue-cli工程技术集合介绍"><a href="#vue-cli工程技术集合介绍" class="headerlink" title="vue-cli工程技术集合介绍"></a>vue-cli工程技术集合介绍</h2><h3 id="构建的vue-cli工程都用到了哪些技术，它们的作用是什么？"><a href="#构建的vue-cli工程都用到了哪些技术，它们的作用是什么？" class="headerlink" title="构建的vue-cli工程都用到了哪些技术，它们的作用是什么？"></a>构建的vue-cli工程都用到了哪些技术，它们的作用是什么？</h3><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">vue<span class="hljs-number">.</span><span class="hljs-keyword">js</span>：vue-<span class="hljs-keyword">cli</span>工程的核心，主要特点是数据双向绑定和组件系统<br>vue-router：vue官方推荐使用的路由框架<br>vuex：专为Vue<span class="hljs-number">.</span><span class="hljs-keyword">js</span>应用项目开发的状态管理器，主要用于维护vue组件间共用的一些变量和方<br>法。<br>asios：用于发起GET或POST等的http请求，基于Promise 设计<br>创建一个eenit<span class="hljs-number">.</span><span class="hljs-keyword">js</span>文件，用于vue事件机制的管理<br>webpack：模块加载和vue-<span class="hljs-keyword">cli</span>工程打包器<br>复制代码<br></code></pre></td></tr></table></figure>

<h3 id="vue-cli工程中常用的npm命令有哪些？"><a href="#vue-cli工程中常用的npm命令有哪些？" class="headerlink" title="vue-cli工程中常用的npm命令有哪些？"></a>vue-cli工程中常用的npm命令有哪些？</h3><p>下载node_modules资源包的命令：<code>npm install</code></p>
<p>启动vue-cli开发环境的npm命令：<code>npm run dev</code></p>
<p>vue-cli生成生产环境部署资源的npm命令：<code>npm run build</code></p>
<p>用于查看vue-cli生产环境部署资源文件大小的npm命令：<code>npm run build --report</code></p>
<p>会在浏览器上自动弹出一个展示vue-cli工程打包后app.js、manifest.js、vendor.js文件里面所包含代码的页面。可以具此优化vue-cli生产环境部署的静态资源，提升页面的加载速度。</p>
<h2 id="vue-cli工程目录结构介绍"><a href="#vue-cli工程目录结构介绍" class="headerlink" title="vue-cli工程目录结构介绍"></a>vue-cli工程目录结构介绍</h2><h3 id="请说出vue-cli工程中每个文件夹和文件的用处"><a href="#请说出vue-cli工程中每个文件夹和文件的用处" class="headerlink" title="请说出vue-cli工程中每个文件夹和文件的用处"></a>请说出vue-cli工程中每个文件夹和文件的用处</h3><p>vue-cli目录解析：</p>
<ol>
<li>build 文件夹：用于存放 webpack 相关配置和脚本。开发中仅偶尔使用 到此文件夹下webpack.base.conf.js 用于配置 less、sass等css预编译库，或者配置一下 UI 库。</li>
<li>config 文件夹：主要存放配置文件，用于区分开发环境、线上环境的不同。 常用到此文件夹下config.js 配置开发环境的端口号、是否开启热加载或者 设置生产环境的静态资源相对路径、是否开启gzip压缩、npm run build 命令打包生成静态资源的名称和路径等。</li>
<li>dist 文件夹：默认 npm run build 命令打包生成的静态资源文件，用于生产部署。</li>
<li>node_modules：存放npm命令下载的开发环境和生产环境的依赖包。</li>
<li>src: 存放项目源码及需要引用的资源文件。</li>
<li>src下assets：存放项目中需要用到的资源文件，css、js、images等。</li>
<li>src下componets：存放vue开发中一些公共组件：header.vue、footer.vue等。</li>
<li>src下emit：自己配置的vue集中式事件管理机制。</li>
<li>src下router：vue-router vue路由的配置文件。</li>
<li>src下service：自己配置的vue请求后台接口方法。</li>
<li>src下page：存在vue页面组件的文件夹。</li>
<li>src下util：存放vue开发过程中一些公共的.js方法。</li>
<li>src下vuex：存放 vuex 为vue专门开发的状态管理器。</li>
<li>src下app.vue：使用标签渲染整个工程的.vue组件。</li>
<li>src下main.js：vue-cli工程的入口文件。</li>
<li>index.html：设置项目的一些meta头信息和提供用于挂载 vue 节 点。</li>
<li>package.json：用于 node_modules资源部 和 启动、打包项目的 npm 命令管理。</li>
</ol>
<h3 id="请你详细介绍一些-package-json-里面的配置"><a href="#请你详细介绍一些-package-json-里面的配置" class="headerlink" title="请你详细介绍一些 package.json 里面的配置"></a>请你详细介绍一些 package.json 里面的配置</h3><ul>
<li>scripts：npm run xxx 命令调用node执行的 .js 文件</li>
<li>dependencies：生产环境依赖包的名称和版本号，即这些依赖包都会打包进生产环境的JS文件里面</li>
<li>devDependencies：开发环境依赖包的名称和版本号，即这些依赖包只用于代码开发的时候，不会打包进生产环境js文件里面。</li>
</ul>
<h3 id="public和assets文件夹的区别"><a href="#public和assets文件夹的区别" class="headerlink" title="public和assets文件夹的区别"></a>public和assets文件夹的区别</h3><p><strong>「相同点」</strong>：两者中的资源都可以被html使用</p>
<p><strong>「不同点：」</strong></p>
<p>若把图片放在assets和public中，html页面都可以使用，但是在动态绑定中，assets路径的图片会加载失败（因为webpack使用的是commenJS规范，必须使用require才可以）。</p>
<p>public放不会变动的文件，public建议放一些外部第三方资源。</p>
<p>public目录下的文件并不会被Webpack处理：它们会直接被复制到最终的打包目录（默认是dist&#x2F;static）下。必须使用<strong>「绝对路径」</strong>引用这些文件。</p>
<p>assets放可能会变动的文件, 自己的文件放在assets。</p>
<p>assets目录中的文件会被webpack处理解析为模块依赖，只支持<strong>「相对路径」</strong>形式。</p>
<p>通过 webpack 处理会有如下好处：</p>
<ul>
<li>脚本和样式表会被压缩且打包在一起，从而避免额外的网络请求。</li>
<li>文件丢失会直接在编译时报错，而不是到了用户端才产生 404 错误。</li>
<li>最终生成的文件名包含了内容哈希，因此你不必担心浏览器会缓存它们的老版本。</li>
</ul>
<h2 id="Vue-js核心知识点高频试题一"><a href="#Vue-js核心知识点高频试题一" class="headerlink" title="Vue.js核心知识点高频试题一"></a>Vue.js核心知识点高频试题一</h2><h3 id="Vue-js的两个核心是什么？"><a href="#Vue-js的两个核心是什么？" class="headerlink" title="Vue.js的两个核心是什么？"></a>Vue.js的两个核心是什么？</h3><ol>
<li><p>数据驱动，也叫双向数据绑定</p>
<p>Vue.js数据观测原理在技术实现上，利用的是 Object.defineProperty和存储器 getter和setter（所以只兼容IE9及以上版本），可称为基于依赖收集的观测机制。核心是VM，即ViewModel，保证数据和视图的一致性。</p>
</li>
<li><p>组件系统 vue组件的核心选项：</p>
</li>
<li><ul>
<li>模板（template）：模板声明了数据和最终展现给用户的DOM之间的映射关系</li>
<li>初始数据（data）：一个组件的初始数据状态。对于可复用的组件来说，这通常是私有的状态。</li>
<li>接受的外部参数（props）：组件之间通过参数来进行数据的传递和共享</li>
<li>方法（methods）：对数据的改动操作一般都在组建的方法内进行</li>
<li>生命周期钩子函数（lifeCycle hooks）：一个组件会出发多个生命周期钩子函数</li>
<li>私有资源（assets）：Vue.js当中经用户自定义的指令、过滤器、组件等统称为资源。一个组件可以声明自己的爱有资源。私有资源只有该组件和它的子组件可以调用</li>
</ul>
</li>
</ol>
<h3 id="对于-Vue-是一套构建用户界面的渐进式框架的理解"><a href="#对于-Vue-是一套构建用户界面的渐进式框架的理解" class="headerlink" title="对于 Vue 是一套构建用户界面的渐进式框架的理解"></a>对于 Vue 是一套构建用户界面的渐进式框架的理解</h3><p>Vue的核心的功能，是一个<strong>「视图模板引擎」</strong>，但这不是说Vue就不能成为一个框架。</p>
<p>在声明式渲染（视图模板引擎）的基础上，我们可以通过添加组件系统、客户端 路由、大规模状态管理来构建一个完整的框架。更重要的是，这些功能相互独立，你可以在核心功能的基础上任意选用其他的部件，不一定要全部整合在一起。可以看到，所说的“渐进式”，其实就是Vue的使用方式，同时也体现了Vue的设计的理念</p>
<blockquote>
<p>❝</p>
<p>渐进式代表的含义是：没有多做职责之外的事。</p>
<p>❞</p>
</blockquote>
<p>vue.js只提供了 vue-cli 生态中最核心的组件系统和双向数据绑定。</p>
<p>像vuex、vue-router都属于围绕 vue.js开发的库。</p>
<blockquote>
<p>❝</p>
<p>比如说，你要使用Angular，必须接受以下东西：</p>
<p>❞</p>
</blockquote>
<ul>
<li>必须使用它的模块机制</li>
<li>必须使用它的依赖注入-</li>
<li>必须使用它的特殊形式定义组件（这一点每个视图框架都有，难以避免）</li>
</ul>
<p>所以Angular是带有比较强的排它性的，如果你的应用不是从头开始，而是要不断考虑是否跟其他东西集成，这些主张会带来一些困扰。</p>
<blockquote>
<p>❝</p>
<p>比如说，你要使用React，你必须理解：</p>
<p>❞</p>
</blockquote>
<ul>
<li>函数式编程的理念，</li>
<li>需要知道什么是副作用，</li>
<li>什么是纯函数，</li>
<li>如何隔离副作用</li>
</ul>
<p>它的侵入性看似没有Angular那么强，主要因为它是软性侵入。</p>
<blockquote>
<p>❝</p>
<p>Vue与React、Angular的不同是，但它是渐进的：</p>
<p>❞</p>
</blockquote>
<ul>
<li>你可以在原有大系统的上面，把一两个组件改用它实现，当jQuery用；</li>
<li>也可以整个用它全家桶开发，当Angular用；</li>
<li>还可以用它的视图，搭配你自己设计的整个下层用。</li>
<li>你可以在底层数据逻辑的地方用OO和设计模式的那套理念，</li>
<li>也可以函数式，都可以，它只是个轻量视图而已，只做了最核心的东西。</li>
</ul>
<h3 id="请说出vue几种常用的指令"><a href="#请说出vue几种常用的指令" class="headerlink" title="请说出vue几种常用的指令"></a>请说出vue几种常用的指令</h3><ul>
<li>v-if：根据表达式的值的真假条件渲染元素。在切换时元素及它的数据绑定 &#x2F; 组件被销毁并重建。</li>
<li>v-show：根据表达式之真假值，切换元素的 display CSS 属性。</li>
<li>v-for：循环指令，基于一个数组或者对象渲染一个列表，vue 2.0以上必须需配合 key使用。</li>
<li>v-bind：动态地绑定一个或多个特性，或一个组件 prop 到表达式。</li>
<li>v-on：用于监听指定元素的DOM事件，比如点击事件。绑定事件监听器。</li>
<li>v-model：实现表单输入和应用状态之间的双向绑定</li>
<li>v-pre：在模板中跳过vue的编译，直接输出原始值。就是在标签中加入v-pre就不会输出vue中的data值了。跳过大量没有指令的节点会加快编译。比如<code>&lt;div v-pre&gt;&#123;&#123;message&#125;&#125;&lt;/div&gt;</code>这时并不会输出我们的message值，而是直接在网页中显示</li>
<li>v-once：只渲染元素和组件一次。随后的重新渲染，元素&#x2F;组件及其所有的子节点将被视为静态内容并跳过。这可以用于优化更新性能。</li>
</ul>
<h3 id="请问-v-if-和-v-show-有什么区别"><a href="#请问-v-if-和-v-show-有什么区别" class="headerlink" title="请问 v-if 和 v-show 有什么区别"></a>请问 v-if 和 v-show 有什么区别</h3><p>共同点：</p>
<p>v-if 和 v-show 都是动态显示DOM元素。</p>
<p>区别：</p>
<ol>
<li>编译过程： v-if 是真正的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。v-show 的元素始终会被渲染并保留在 DOM 中。v-show 只是简单地切换元素的 CSS 属性display。</li>
<li>编译条件： v-if 是惰性的：如果在初始渲染时条件为假，则什么也不做。直到条件第一次变为真时，才会开始渲染条件块。v-show不管初始条件是什么，元素总是会被渲染，并且只是简单地基于CSS 进行切换。</li>
<li>性能消耗： v-if有更高的切换消耗。v-show有更高的初始渲染消耗。</li>
<li>应用场景： v-if适合运行时条件很少改变时使用。v-show适合频繁切换。</li>
</ol>
<h3 id="vue常用的修饰符"><a href="#vue常用的修饰符" class="headerlink" title="vue常用的修饰符"></a>vue常用的修饰符</h3><ul>
<li><p>v-on 指令常用修饰符：</p>
</li>
<li><ul>
<li>.stop - 调用 event.stopPropagation()，禁止事件冒泡。</li>
<li>.prevent - 调用 event.preventDefault()，阻止事件默认行为。</li>
<li>.capture - 添加事件侦听器时使用 capture 模式。</li>
<li>.self - 只当事件是从侦听器绑定的元素本身触发时才触发回调。</li>
<li>.native - 监听组件根元素的原生事件。</li>
<li>.once - 只触发一次回调。</li>
<li>.left - (2.2.0) 只当点击鼠标左键时触发。</li>
<li>.right - (2.2.0) 只当点击鼠标右键时触发。</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 阻止单击事件继续传播 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-on:click.stop</span>=<span class="hljs-string">&quot;doThis&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 提交事件不再重载页面 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">v-on:submit.prevent</span>=<span class="hljs-string">&quot;onSubmit&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 修饰符可以串联 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-on:click.stop.prevent</span>=<span class="hljs-string">&quot;doThat&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 只有修饰符 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">v-on:submit.prevent</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 添加事件监听器时使用事件捕获模式 --&gt;</span><br><span class="hljs-comment">&lt;!-- 即元素自身触发的事件先在此处理，然后才交由内部元素进行处理 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-on:click.capture</span>=<span class="hljs-string">&quot;doThis&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 只当在 event.target 是当前元素自身时触发处理函数 --&gt;</span><br><span class="hljs-comment">&lt;!-- 即事件不是从内部元素触发的 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-on:click.self</span>=<span class="hljs-string">&quot;doThat&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 点击事件将只会触发一次 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-on:click.once</span>=<span class="hljs-string">&quot;doThis&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 滚动事件的默认行为 (即滚动行为) 将会立即触发 --&gt;</span><br><span class="hljs-comment">&lt;!-- 而不会等待 `onScroll` 完成 --&gt;</span><br><span class="hljs-comment">&lt;!-- 这其中包含 `event.preventDefault()` 的情况 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-on:scroll.passive</span>=<span class="hljs-string">&quot;onScroll&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 只有在 `key` 是 `Enter` 时调用 `vm.submit()` --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-on:keyup.enter</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>注意： 如果是在自己封装的组件或者是使用一些第三方的UI库时，会发现并不起效果，这时就需要用.native修饰符了，如：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim">//使用示例：<br>&lt;<span class="hljs-keyword">el</span>-<span class="hljs-built_in">input</span><br>v-model=<span class="hljs-string">&quot;inputName&quot;</span><br>placeholder=<span class="hljs-string">&quot;搜索你的文件&quot;</span><br>@keyup.enter.native=<span class="hljs-string">&quot;searchFile(params)&quot;</span><br>&gt;<br>&lt;/<span class="hljs-keyword">el</span>-<span class="hljs-built_in">input</span>&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li><p>v-bind 指令常用修饰符：</p>
</li>
<li><ul>
<li>.sync (2.3.0+) 语法糖，会扩展成一个更新父组件绑定值的 v-on 侦听器。</li>
</ul>
</li>
<li><p>v-model 指令常用修饰符：</p>
</li>
<li><ul>
<li>.lazy - 取代 input 监听 change 事件</li>
<li>.number - 输入字符串转为数字</li>
<li>.trim - 输入首尾空格过滤</li>
</ul>
</li>
</ul>
<h3 id="v-on可以监听多个方法吗？"><a href="#v-on可以监听多个方法吗？" class="headerlink" title="v-on可以监听多个方法吗？"></a>v-on可以监听多个方法吗？</h3><p>v-on可以监听多个方法，例如：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;input <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;text&quot;</span> :<span class="hljs-attribute">value</span>=<span class="hljs-string">&quot;name&quot;</span> @<span class="hljs-attribute">input</span>=<span class="hljs-string">&quot;onInput&quot;</span> @<span class="hljs-attribute">focus</span>=<span class="hljs-string">&quot;onFocus&quot;</span><br>@<span class="hljs-attribute">blur</span>=<span class="hljs-string">&quot;onBlur&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>

<p>但是同一种事件类型的方法，vue-cli工程会报错，例如：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;a <span class="hljs-attribute">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> @<span class="hljs-attribute">click</span>=<span class="hljs-string">&quot;methodsOne&quot;</span> @<span class="hljs-attribute">click</span>=<span class="hljs-string">&quot;methodsTwo&quot;</span>&gt;&lt;/a&gt;<br></code></pre></td></tr></table></figure>

<h3 id="vue中-key-值的作用"><a href="#vue中-key-值的作用" class="headerlink" title="vue中 key 值的作用"></a>vue中 key 值的作用</h3><p>key值：用于管理可复用的元素。因为vue会尽可能高效的渲染元素，通常会复用已有元素而不是从头开始渲染。这么做会使Vue变得非常快，但是这样也不总是符合实际需求。</p>
<p>2.2.0+ 的版本里，当在组件中使用 v-for 时，key 现在是必须的。</p>
<p>例如，如果你允许用户在不同的登录方式之间切换：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;loginType === &#x27;username&#x27;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Username<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter your username&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-else</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Email<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter your email address&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>那么在上面的代码中切换loginType 将不会清除用户已经输入的内容。因为两个模板使用了相同的元素，&lt;&#x2F; input&gt;不会被替换掉，仅仅是替换了它的placeholder。</p>
<p>这样也不总是符合实际需求，所以Vue为你提供了一种方式来表达这两个元素是完全独立的，不要复用它们。只需添加一个具有唯一值的 key 属性即可：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;loginType === &#x27;username&#x27;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Username<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter your username&quot;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;username-input&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-else</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Email<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter your email address&quot;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;email-input&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>现在，每次切换时，输入框都将被重新渲染。</p>
<h3 id="vue事件中如何使用event对象？"><a href="#vue事件中如何使用event对象？" class="headerlink" title="vue事件中如何使用event对象？"></a>vue事件中如何使用event对象？</h3><p>如果直接传递具体的值。可以像如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript">&lt;button <span class="hljs-meta">@click</span>=<span class="hljs-string">&quot;event(&#x27;123&#x27;)&quot;</span>&gt;修饰符&lt;/button&gt;<br><br><span class="hljs-title function_">event</span>(<span class="hljs-params">message</span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message); <span class="hljs-comment">//123</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果需要访问原始的DOM事件，可以使用特殊变量 $event，使用方法如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript">&lt;button <span class="hljs-meta">@click</span>=<span class="hljs-string">&quot;event($event)&quot;</span>&gt;修饰符&lt;/button&gt;<br><br><span class="hljs-title function_">event</span>(<span class="hljs-params">e</span>)&#123;<br>    <span class="hljs-title function_">console</span>(e); <span class="hljs-comment">//MouseEvent事件</span><br>&#125;<br>&lt;button data-id=<span class="hljs-string">&#x27;event&#x27;</span> <span class="hljs-meta">@click</span>=<span class="hljs-string">&quot;event($event)&quot;</span>&gt;修饰符&lt;/button&gt;<br><br><span class="hljs-title function_">event</span>(<span class="hljs-params">e</span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">srcElement</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">id</span>); <span class="hljs-comment">//event</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>ref的使用：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&lt;<span class="hljs-selector-tag">div</span> ref=<span class="hljs-string">&quot;name&quot;</span>&gt;<br>    &lt;<span class="hljs-selector-tag">button</span> data-id=<span class="hljs-string">&#x27;event&#x27;</span> @click=<span class="hljs-string">&quot;event($event)&quot;</span>&gt;修饰符&lt;/button&gt;<br>&lt;/div&gt;<br> <br><span class="hljs-function"><span class="hljs-title">event</span><span class="hljs-params">()</span></span>&#123;<br>    console<span class="hljs-selector-class">.log</span>(this.<span class="hljs-variable">$refs</span>.name)<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="什么是-nextTick？"><a href="#什么是-nextTick？" class="headerlink" title="什么是$nextTick？"></a>什么是$nextTick？</h3><p>简单回答：因为Vue的异步更新队列，$nextTick是用来知道什么时候DOM更新完成的。</p>
<p>异步更新队列：指的是当状态发生变化时，Vue异步执行DOM更新。</p>
<p>DOM的异步更新：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;template&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;test&quot;</span>&gt;</span>&#123;&#123;test&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleClick&quot;</span>&gt;</span>tet<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">data</span> () &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">test</span>: <span class="hljs-string">&#x27;begin&#x27;</span><br>        &#125;;<br>    &#125;,<br>    <span class="hljs-title function_">methods</span> () &#123;<br>        <span class="hljs-title function_">handleClick</span> () &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">test</span> = <span class="hljs-string">&#x27;end&#x27;</span>;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">test</span>.<span class="hljs-property">innerText</span>);<span class="hljs-comment">//打印“begin”</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>vue官方文档中是这样说的：</p>
<blockquote>
<p>❝</p>
<p>可能你还没有注意到，Vue异步执行DOM更新。只要观察到数据变化，Vue将开启一个队列，并缓冲在同一事件循环中发生的所有数据变化。如果同一个watcher被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和DOM操作上非常重要。然后，在下一个事件循环在“tick”中，Vue刷新队列并执行实际（已去重）的工作</p>
<p>❞</p>
</blockquote>
<p>简而言之，就是在一个事件循环中发生的所有数据改变都会在下一个事件循环的Tick中来触发视图更新，这也是一个“批处理”的过程。（注意下一个事件循环的Tick有可能是在当前的Tick微任务执行阶段执行，也可能是在下一个Tick执行，主要取决于nextTick函数到底是使用Promise&#x2F;MutationObserver还是setTimeout）</p>
<h4 id="为什么要异步更新视图"><a href="#为什么要异步更新视图" class="headerlink" title="为什么要异步更新视图"></a>为什么要异步更新视图</h4><p>看下面的代码：</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">test</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">export default &#123;</span><br><span class="language-xml">    data () &#123;</span><br><span class="language-xml">        return &#123;</span><br><span class="language-xml">            test: 0</span><br><span class="language-xml">        &#125;;</span><br><span class="language-xml">    &#125;,</span><br><span class="language-xml">    mounted () &#123;</span><br><span class="language-xml">        for(let i = 0; i &lt; 1000; i++) &#123;</span><br><span class="language-xml">            this.test++;</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">    &#125;</span><br><span class="language-xml">&#125;</span><br></code></pre></td></tr></table></figure>

<p>现在有这样的一种情况，mounted的时候test的值会被++循环执行 1000 次。 每次++时，都会根据响应式触发setter-&gt;Dep-&gt;Watcher-&gt;update-&gt;run。 如果这时候没有异步更新视图，那么每次++都会直接操作DOM更新视图，这是非常消耗性能的。</p>
<p>所以Vue实现了一个queue队列，在下一个Tick（或者是当前Tick的微任务阶段）的时候会统一执行queue中Watcher的run。同时，拥有相同id的Watcher不会被重复加入到该queue中去，所以不会执行 1000 次Watcher的run。最终更新视图只会直接将test对应的DOM的 0 变成 1000 。 保证更新视图操作DOM的动作是在当前栈执行完以后下一个Tick（或者是当前Tick的微任务阶段）的时候调用，大大优化了性能。</p>
<p>Vue会根据当前浏览器环境优先使用原生的Promise.then和MutationObservery以及setImmediate，如果都不支持，就会采用setTimeout代替。</p>
<h4 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h4><p>在操作DOM节点无效的时候，就要考虑操作的实际DOM节点是否存在，或者相应的DOM是否被更新完毕。</p>
<ul>
<li><p>在created钩子中涉及DOM节点的操作肯定是无效的，因为此时还没有完成相关DOM的挂载。</p>
<p>解决的方法就是在nextTick函数中去处理DOM，这样才能保证DOM被成功挂载而有效操作。</p>
</li>
<li><p>在数据变化之后要执行某个操作，而这个操作需要使用随数据改变而改变的DOM时，这个操作应该放进Vue.nextTick。</p>
</li>
<li><p>获取this.$refs.refName 返回undefined时，证明组件可能尚未存在，这时候可以在Vue.nextTick获取。</p>
</li>
</ul>
<h3 id="Vue-组件中-data-为什么必须是函数"><a href="#Vue-组件中-data-为什么必须是函数" class="headerlink" title="Vue 组件中 data 为什么必须是函数"></a>Vue 组件中 data 为什么必须是函数</h3><p>因为一个组件是可以共享的，但它们的data是私有的，所以每个组件都return一个新的data对象，返回一个唯一的对象，不要和其他组件共用一个对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;my-component&#x27;</span>, &#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;&lt;div&gt;OK&lt;/div&gt;&#x27;</span>,<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;&#125; <span class="hljs-comment">// 返回一个唯一的对象，不要和其他组件共用一个对象进行返回</span><br>    &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>实际上，它的使用过程如下：</p>
<ul>
<li>首先需要创建一个组件构造器</li>
<li>然后注册组件</li>
<li>注册组件的本质其实就是建立一个组件构造器的引用</li>
<li>使用组件才是真正的创建一个组件实例</li>
<li>所以，注册组件其实并不是产生新的组件类，但会产生一个可以用用来实例化的新方式</li>
</ul>
<p>理解这个过程之后，在理解js的原型链：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">var</span> MyComponent = <span class="hljs-built_in">function</span>() &#123;&#125;<br><br>MyComponent<span class="hljs-selector-class">.prototype</span><span class="hljs-selector-class">.data</span> = &#123;<br>    <span class="hljs-selector-tag">a</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-selector-tag">b</span>: <span class="hljs-number">2</span>, <br>&#125;<br></code></pre></td></tr></table></figure>

<p>上面是一个虚拟的组件构造器，真实的组件构造器方法很多:</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">var</span> component1 = <span class="hljs-keyword">new</span> MyComponent()<br><span class="hljs-keyword">var</span> component2 = <span class="hljs-keyword">new</span> MyComponent()<br></code></pre></td></tr></table></figure>

<p>上面实例化出来两个组件实例，也就是通过调用，创建的两个实例</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">component1</span>.<span class="hljs-class"><span class="hljs-keyword">data</span>.a === component2.<span class="hljs-keyword">data</span>.a // true</span><br><span class="hljs-title">component1</span>.<span class="hljs-class"><span class="hljs-keyword">data</span>.b = 5</span><br><span class="hljs-title">component2</span>.<span class="hljs-class"><span class="hljs-keyword">data</span>.b // 5</span><br></code></pre></td></tr></table></figure>

<p>从上面的代码可以看出，如果两个实例同时引用一个对象，那么当你修改其中一个属性的时候，另外一个实例也会跟着改。两个实例应该自己各有自己的实例域才对，做更改：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">var</span> MyComponent = function() &#123;<br>    <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span> = <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>()<br>&#125;<br>MyComponent.prototype.<span class="hljs-keyword">data</span> = function() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        a: <span class="hljs-number">1</span>,<br>        b: <span class="hljs-number">2</span>,<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>这样每一个实例的data属性都是独立的，不会相互影响了。所以，你现在知道为什么vue组件的data必须是函数了吧。这都是因为js本身的特性带来的，跟vue本身设计无关。</p>
<h3 id="v-for-与-v-if-的优先级"><a href="#v-for-与-v-if-的优先级" class="headerlink" title="v-for 与 v-if 的优先级"></a>v-for 与 v-if 的优先级</h3><p>当它们处于同一节点，v-for的优先级比v-if更高，这意味着 v-if将分别重复运行于每个 v-for循环中。当你想为仅有的一些项渲染节点时，这种优先级的机制会十分有用，如下：</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;todo in todos&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;!todo.isComplete&quot;</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">todo</span> &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>上面的代码只传递了未完成的 todos。 而如果你的目的是有条件地跳过循环的执行，那么可以将 v-if置于外层元素 (或 &lt; template&gt;)上。如：</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;todos.length&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;todo in todos&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">todo</span> &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-else</span>&gt;</span>No todos left!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p><strong>「注意：当你只想条件性的渲染列表中的某些项的时候建议使用computed进行过滤后使用v-for进行渲染，而不是v-for和v-if同时使用。」</strong></p>
<h2 id="Vue-js核心知识点高频试题二"><a href="#Vue-js核心知识点高频试题二" class="headerlink" title="Vue.js核心知识点高频试题二"></a>Vue.js核心知识点高频试题二</h2><h3 id="组件传参"><a href="#组件传参" class="headerlink" title="组件传参"></a>组件传参</h3><h4 id="props-emit"><a href="#props-emit" class="headerlink" title="props&#x2F;$emit"></a>props&#x2F;$emit</h4><p>组件是Vue.js中最强大的功能之一，而组件实例的作用域是相互独立的，这就意味着不同组件之间的数据无法相互引用。一般来说，组件可以有以下几种关系：</p>
<ul>
<li>父子关系</li>
<li>兄弟关系</li>
<li>个贷关系</li>
</ul>
<h5 id="父组件向子组件传值"><a href="#父组件向子组件传值" class="headerlink" title="父组件向子组件传值"></a>父组件向子组件传值</h5><p>子组件:</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">            //遍历传递过来的值，然后呈现到页面</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;user in users&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">user</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;zizujian&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">props</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">users</span>: &#123; <span class="hljs-comment">//这个就是父组件中子标签自定义名字</span></span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">require</span>: <span class="hljs-literal">true</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>父组件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">User</span> <span class="hljs-attr">:users</span>=<span class="hljs-string">&quot;users&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">User</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../zizujian&quot;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;fuzujian&quot;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">components</span>: &#123; <span class="hljs-title class_">User</span> &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">users</span>: [<span class="hljs-string">&quot;ma&quot;</span>, <span class="hljs-string">&quot;nan&quot;</span>, <span class="hljs-string">&quot;nan&quot;</span>]</span><br><span class="language-javascript">        &#125;;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">&#125;;</span><br></code></pre></td></tr></table></figure>

<p>总结：父组件通过 props向下传递数据给子组件。</p>
<p>注：组件中的数据共有三种形式： data 、 props、 computed</p>
<h5 id="子组件向父组件传值（通过事件形式）"><a href="#子组件向父组件传值（通过事件形式）" class="headerlink" title="子组件向父组件传值（通过事件形式）"></a>子组件向父组件传值（通过事件形式）</h5><p>子组件</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeTitle&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">title</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;zizujian&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Vue.js Demo&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">methods</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">changeTitle</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-comment">//自定义事件，传递值“子组件向父组件传值”</span></span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&quot;titleChanged&quot;</span>, <span class="hljs-string">&quot;子组件向父组件传值&quot;</span>); </span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br></code></pre></td></tr></table></figure>

<p>父组件</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> @<span class="hljs-attr">titleChanged</span>=<span class="hljs-string">&quot;updateTitle&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Header</span>&gt;</span>//与子组件titleChanged自定义事件保持一致</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">title</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../zizujian&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;fuzujian&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">components</span>: &#123; <span class="hljs-title class_">Header</span> &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;传递的是一个值&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">methods</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">updateTitle</span>(<span class="hljs-params">e</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = e;</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br></code></pre></td></tr></table></figure>

<p>总结：子组件通过 event给父组件发送消息，实际上就是子组件把自己的数据发送到父组件。</p>
<h4 id="emit-on"><a href="#emit-on" class="headerlink" title="$emit&#x2F;$on"></a>$emit&#x2F;$on</h4><p>这种方式通过一个空的Vue实例作为中央事件总线（事件中心），用它来触发事件和监听事件，巧妙而轻量地实现了任何组件间的通信，包括父子、兄弟、跨级。</p>
<p>当我们的项目比较大时，可以选择更好的转台管理解决方案Vuex</p>
<p>具体实现：</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-built_in">var</span> Event=<span class="hljs-literal">new</span> Vue();<br><br><span class="hljs-comment">// 发送数据</span><br>Event.$emit(事件名,数据);<br><br><span class="hljs-comment">// 接收数据</span><br>Event.$on(事件名,<span class="hljs-built_in">data</span> =&gt; &#123;&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h4><p>vuex适用于一个状态需要在多个组件中同时使用的场景。避免传来传去逻辑复杂难以维护。</p>
<h4 id="attrs-listeners"><a href="#attrs-listeners" class="headerlink" title="$attrs&#x2F;$listeners"></a>$attrs&#x2F;$listeners</h4><p>多级组件嵌套传递数据，仅仅是传递数据，不做中间处理</p>
<p><code>$attrs</code>：包含了父作用域中不被 prop所识别（且获取）的特性绑定。当一个组件没有声明任何prop时，这里会包含所有父作用域的绑定，并且可以通过 <code>v-bind=&quot;$attrs&quot;</code> 传入内部组件。通常配合<code>inheritAttrs</code>选项一起使用。</p>
<p><code>$listeners</code>：包含了父作用域中的 (不含 .native 修饰器的) v-on 事件监听器。它可以通过 v-on&#x3D;”$listeners” 传入内部组件</p>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">// index.vue</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>浪里行舟<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">child-com</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">:foo</span>=<span class="hljs-string">&quot;foo&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">:boo</span>=<span class="hljs-string">&quot;boo&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">:coo</span>=<span class="hljs-string">&quot;coo&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">:doo</span>=<span class="hljs-string">&quot;doo&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;前端工匠&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-com1</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> <span class="hljs-title function_">childCom1</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./childCom1.vue&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">components</span>: &#123; childCom1 &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">foo</span>: <span class="hljs-string">&quot;Javascript&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">boo</span>: <span class="hljs-string">&quot;Html&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">coo</span>: <span class="hljs-string">&quot;CSS&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">doo</span>: <span class="hljs-string">&quot;Vue&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;;</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml">// childCom1.vue</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;border&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>foo: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">foo</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>childCom1的$attrs: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">$attrs</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">child-com2</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">&quot;$attrs&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-com2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> <span class="hljs-title function_">childCom2</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./childCom2.vue&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">components</span>: &#123;childCom&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 可以关闭自动挂载到组件根元素上的没有在props声明的属性</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">props</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">foo</span>: <span class="hljs-title class_">String</span> <span class="hljs-comment">// foo作为props属性绑定</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$attrs</span>);</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// &#123; &quot;boo&quot;: &quot;Html&quot;, &quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;:&quot;Vue&quot;, &quot;title&quot;: &quot;前端工匠&quot; &#125;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml">// childCom2.vue</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;border&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>boo: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">boo</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>childCom2: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">$attrs</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">child-com3</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">&quot;$attrs&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-com3</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> <span class="hljs-title function_">childCom3</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&quot;./childCom3.vue&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">components</span>: &#123;childCom&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">props</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">boo</span>: <span class="hljs-title class_">String</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$attrs</span>); </span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// &#123; &quot;coo&quot;: &quot;CSS&quot;, &quot;doo&quot;: &quot;Vue&quot;, &quot;title&quot;:&quot;前端工匠&quot; &#125;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml">// childCom3.vue</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;border&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>childCom3: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">$attrs</span> &#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">props</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">coo</span>: <span class="hljs-title class_">String</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>Vue2.4提供了<code>$attrs/$listeners</code> 来传递数据与事件，跨级组件之间的通讯变得更简单。</p>
<p>简单来说：<code>$attrs与$listeners</code> 是两个对象，<code>$attrs</code> 里存放的是父组件中绑定的非 Props 属性，<code>$listeners</code>里存放的是父组件中绑定的非原生事件。</p>
<h4 id="provide-inject"><a href="#provide-inject" class="headerlink" title="provide&#x2F;inject"></a>provide&#x2F;inject</h4><p>Vue2.2.0新增API,这对选项需要一起使用，以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在起上下游关系成立的时间里始终生效。一言而蔽之：祖先组件中通过provider来提供变量，然后在子孙组件中通过inject来注入变量。</p>
<p>provide &#x2F; inject API 主要解决了跨级组件间的通信问题，不过它的使用场景，主要是子组件获取上级组件的状态，跨级组件间建立了一种主动提供与依赖注入的关系。</p>
<p>假设有两个组件： A.vue 和 B.vue，B 是 A 的子组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// A.vue</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-attr">provide</span>: &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;浪里行舟&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// B.vue</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-attr">inject</span>: [<span class="hljs-string">&#x27;name&#x27;</span>],<br>    <span class="hljs-title function_">mounted</span> () &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// 浪里行舟</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>需要注意的是：provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的</p>
<p>所以，上面 A.vue 的 name 如果改变了，B.vue 的 this.name 是不会改变的，仍然是”浪里行舟”。</p>
<h5 id="provide与-inject如何实现数据响应式"><a href="#provide与-inject如何实现数据响应式" class="headerlink" title="provide与 inject如何实现数据响应式"></a>provide与 inject如何实现数据响应式</h5><p>一般来说，有两种办法：</p>
<ul>
<li>provide祖先组件的实例，然后在子孙组件中注入依赖，这样就可以在子孙组件中直接修改祖先组件的实例的属性，不过这种方法有个缺点就是这个实例上挂载很多没有必要的东西比如props，methods</li>
<li>使用2.6最新API Vue.observable 优化响应式 provide(推荐)</li>
</ul>
<p>我们来看个例子：孙组件D、E和F获取A组件传递过来的color值，并能实现数据响应式变化，即A组件的color变化后，组件D、E、F会跟着变（核心代码如下：）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//A 组件</span><br>&lt;div&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>A 组件<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;() =&gt; changeColor()&quot;</span>&gt;</span>改变color<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChildrenB</span> /&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChildrenC</span> /&gt;</span></span><br>&lt;/div&gt;<br>......<br><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;blue&quot;</span><br>    &#125;;<br>&#125;,<br><span class="hljs-comment">// provide() &#123;</span><br><span class="hljs-comment">//  return &#123;</span><br><span class="hljs-comment">//      theme: &#123;</span><br><span class="hljs-comment">//          color: this.color //这种方式绑定的数据并不是可响应的</span><br><span class="hljs-comment">//      &#125; // 即A组件的color变化后，组件D、E、F不会跟着变</span><br><span class="hljs-comment">//  &#125;;</span><br><span class="hljs-comment">// &#125;,</span><br><br><span class="hljs-title function_">provide</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">theme</span>: <span class="hljs-variable language_">this</span><span class="hljs-comment">//方法一：提供祖先组件的实例</span><br>    &#125;;<br>&#125;,<br><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">changeColor</span>(<span class="hljs-params">color</span>) &#123;<br>        <span class="hljs-keyword">if</span> (color) &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> === <span class="hljs-string">&quot;blue&quot;</span>? <span class="hljs-string">&quot;red&quot;</span> : <span class="hljs-string">&quot;blue&quot;</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 方法二:使用2.6最新API Vue.observable 优化响应式 provide</span><br> <span class="hljs-title function_">provide</span>(<span class="hljs-params"></span>) &#123;<br>     <span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span> = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">observable</span>(&#123;<br>        <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;blue&quot;</span><br>     &#125;);<br>     <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">theme</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span><br>     &#125;;<br> &#125;,<br> <span class="hljs-attr">methods</span>: &#123;<br>     <span class="hljs-title function_">changeColor</span>(<span class="hljs-params">color</span>) &#123;<br>         <span class="hljs-keyword">if</span> (color) &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span>.<span class="hljs-property">color</span> = color;<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span>.<span class="hljs-property">color</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">theme</span>.<span class="hljs-property">color</span> === <span class="hljs-string">&quot;blue&quot;</span>? <span class="hljs-string">&quot;red&quot;</span> :<span class="hljs-string">&quot;blue&quot;</span>;<br>         &#125;<br>     &#125;<br> &#125;<br> <br><span class="hljs-comment">// F 组件</span><br>&lt;template functional&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;border2&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; color: injections.theme.color &#125;&quot;</span>&gt;</span>F 组件<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">inject</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">theme</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-comment">//函数式组件取值不一样</span></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> (&#123;&#125;)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125; &#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>虽说provide 和 inject 主要为高阶插件&#x2F;组件库提供用例，但如果你能在业务中熟练运用，可以达到事半功倍的效果！</p>
<h4 id="parent-children与-ref"><a href="#parent-children与-ref" class="headerlink" title="$parent &#x2F; $children与 ref"></a>$parent &#x2F; $children与 ref</h4><ul>
<li>ref：如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件实例</li>
<li><code>$parent / $children</code>：访问父 &#x2F; 子实例</li>
</ul>
<p>需要注意的是：这两种都是直接得到组件实例，使用后可以直接调用组件的方法或访问数据。我们先来看个用 ref来访问组件的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// component-a 子组件</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">data</span> () &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Vue.js&#x27;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">methods</span>: &#123;<br>        <span class="hljs-title function_">sayHello</span> () &#123;<br>            <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 父组件</span><br>&lt;template&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">component-a</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;comA&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component-a</span>&gt;</span></span><br>&lt;/template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">mounted</span> () &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">const</span> comA = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">comA</span>;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(comA.<span class="hljs-property">title</span>); <span class="hljs-comment">// Vue.js</span></span></span><br><span class="language-javascript"><span class="language-xml">        comA.<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// 弹窗</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>不过，这两种方法的弊端是，无法在跨级或兄弟间通信。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">// parent.vue<br><span class="hljs-tag">&lt;<span class="hljs-name">component-a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component-a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">component-b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component-b</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">component-b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component-b</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>我们想在 component-a 中，访问到引用它的页面中（这里就是parent.vue）的两个 component-b组件，那这种情况下，就得配置额外的插件或工具了，比如 Vuex 和 Bus 的解决方案。</p>
<h4 id="组件传参场景总结"><a href="#组件传参场景总结" class="headerlink" title="组件传参场景总结"></a>组件传参场景总结</h4><p>常见使用场景可以分为三类：</p>
<ul>
<li>父子通信： 父向子传递数据是通过 props，子向父是通过 events（<code>$emit</code>）；通过父链 &#x2F; 子链也可以通信（<code>$parent / $children</code>）；ref 也可以访问组件实例；provide &#x2F; inject API；<code>$attrs/$listeners</code></li>
<li>兄弟通信： Bus；Vuex</li>
<li>跨级通信： Bus；Vuex；provide &#x2F; inject API、<code>$attrs/$listeners</code></li>
</ul>

		</div>

		
		<div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
			<div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> vue3和vue2区别</li>
        <li><strong>Author:</strong> chengj-code</li>
        <li><strong>Created at
                :</strong> 2023-06-02 09:59:11</li>
        
            <li>
                <strong>Updated at
                    :</strong> 2023-09-14 22:24:03
            </li>
        
        <li>
            <strong>Link:</strong> https://chengj-code.github.io/2023/06/02/vue3和vue2区别/
        </li>
        <li>
            <strong>
                License:
            </strong>
            

            
                This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a>.
            
        </li>
    </ul>
</div>

		</div>
		

		

		

		
		<div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
			
			<div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="prev" rel="prev" href="/2025/05/17/Vue2%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/Vue2%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%20-%20%E6%80%BB%E7%BB%93/">
					<span class="left arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-left"></i>
					</span>
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">Vue2源码学习 - 总结</span>
						<span class="post-nav-item">Prev posts</span>
					</span>
				</a>
			</div>
			
			
			<div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="next" rel="next" href="/2023/05/23/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87%E6%95%B4%E7%90%86/">
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item">前端面试八股文整理</span>
						<span class="post-nav-item">Next posts</span>
					</span>
					<span class="right arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-right"></i>
					</span>
				</a>
			</div>
			
		</div>
		


		
	</div>

	
	<div class="toc-content-container">
		<div class="post-toc-wrap">
	<div class="post-toc">
		<div class="toc-title">On this page</div>
		<div class="page-title">vue3和vue2区别</div>
		<ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue3%E7%9A%84%E5%8F%98%E5%8C%96"><span class="nav-number">1.</span> <span class="nav-text">Vue3的变化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">响应式原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI"><span class="nav-number">3.</span> <span class="nav-text">组合式API</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%E5%92%8C%E6%96%B9%E6%B3%95"><span class="nav-number">4.</span> <span class="nav-text">定义变量和方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="nav-number">5.</span> <span class="nav-text">生命周期函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue3%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="nav-number">6.</span> <span class="nav-text">Vue3父子组件通信</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90"><span class="nav-number">6.1.</span> <span class="nav-text">父传子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E4%BC%A0%E7%88%B6"><span class="nav-number">6.2.</span> <span class="nav-text">子传父</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ref%E5%92%8Creactive"><span class="nav-number">7.</span> <span class="nav-text">ref和reactive</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87ref%E8%8E%B7%E5%8F%96%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B"><span class="nav-number">7.1.</span> <span class="nav-text">通过ref获取组件实例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#provide%E5%92%8Creject"><span class="nav-number">8.</span> <span class="nav-text">provide和reject</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pinia%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="nav-number">9.</span> <span class="nav-text">pinia状态管理工具</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-model%E5%8E%9F%E7%90%86%E4%B8%8D%E5%90%8C"><span class="nav-number">10.</span> <span class="nav-text">v-model原理不同</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue2%E7%9A%84v-model%E5%8E%9F%E7%90%86"><span class="nav-number">10.1.</span> <span class="nav-text">Vue2的v-model原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue3%E7%9A%84v-model%E5%8E%9F%E7%90%86"><span class="nav-number">10.2.</span> <span class="nav-text">Vue3的v-model原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E5%8E%9F%E7%94%9F%E6%A0%87%E7%AD%BE%E4%B8%8A%E4%BD%BF%E7%94%A8"><span class="nav-number">10.2.1.</span> <span class="nav-text">在原生标签上使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%8A%E4%BD%BF%E7%94%A8"><span class="nav-number">10.2.2.</span> <span class="nav-text">在组件上使用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="nav-number">11.</span> <span class="nav-text">自定义指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue2%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="nav-number">11.1.</span> <span class="nav-text">Vue2自定义指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue3%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="nav-number">11.2.</span> <span class="nav-text">Vue3自定义指令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue2%E5%92%8C3%E5%AF%B9%E6%AF%94"><span class="nav-number"></span> <span class="nav-text">Vue2和3对比</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%84%9A%E6%89%8B%E6%9E%B6%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.</span> <span class="nav-text">脚手架创建项目</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#vue3%E6%96%B0%E7%89%B9%E6%80%A7"><span class="nav-number">1.1.</span> <span class="nav-text">vue3新特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80-%E5%93%8D%E5%BA%94%E5%8E%9F%E7%90%86%E5%AF%B9%E6%AF%94"><span class="nav-number">1.1.1.</span> <span class="nav-text">一.响应原理对比</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8C-Composition-API"><span class="nav-number">1.1.2.</span> <span class="nav-text">二. Composition API</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#composition-API-%E8%A7%A3%E5%86%B3%E4%BA%86%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">composition API 解决了什么问题</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%89-%E5%BB%BA%E7%AB%8B%E6%95%B0%E6%8D%AE-data"><span class="nav-number">1.1.3.</span> <span class="nav-text">三.建立数据 data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%9B-%E7%A2%8E%E7%89%87"><span class="nav-number">1.1.4.</span> <span class="nav-text">四.碎片</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%94-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%E6%94%B9%E5%8F%98"><span class="nav-number">1.1.5.</span> <span class="nav-text">五.生命周期钩子函数改变</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%AD-%E7%88%B6%E5%AD%90%E4%BC%A0%E5%8F%82"><span class="nav-number">1.1.6.</span> <span class="nav-text">六.父子传参</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90-1"><span class="nav-number">1.1.6.1.</span> <span class="nav-text">父传子</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AD%90%E4%BC%A0%E7%88%B6%EF%BC%88emit-event%EF%BC%89"><span class="nav-number">1.1.6.2.</span> <span class="nav-text">子传父（emit event）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%83-vue3-Teleport%E7%9E%AC%E7%A7%BB%E7%BB%84%E4%BB%B6"><span class="nav-number">1.1.7.</span> <span class="nav-text">七.vue3 Teleport瞬移组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%AB-computed%E5%92%8Cwatch"><span class="nav-number">1.1.8.</span> <span class="nav-text">八.computed和watch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B9%9D-defineProperty%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="nav-number">1.1.9.</span> <span class="nav-text">九.defineProperty实现响应式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%81-proxy%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="nav-number">1.1.10.</span> <span class="nav-text">十.proxy实现响应式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue3%E4%B8%ADref%E4%B8%8Ereactive"><span class="nav-number">2.</span> <span class="nav-text">vue3中ref与reactive</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nextTick-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-number">3.</span> <span class="nav-text">$nextTick 实现原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-for%E4%B8%AD%E6%B2%A1%E6%9C%89key%E5%92%8C%E6%9C%89key%E4%B8%A4%E7%A7%8D%E6%83%85%E5%86%B5%EF%BC%8Cdiff%E7%AE%97%E6%B3%95%E6%80%8E%E4%B9%88%E6%AF%94%E8%BE%83"><span class="nav-number">4.</span> <span class="nav-text">v-for中没有key和有key两种情况，diff算法怎么比较</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#diff%E7%AE%97%E6%B3%95"><span class="nav-number">4.1.</span> <span class="nav-text">diff算法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E5%88%B0%E7%9A%84%E9%87%8D%E8%A6%81%E5%87%BD%E6%95%B0"><span class="nav-number">4.2.</span> <span class="nav-text">用到的重要函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#patch%E5%87%BD%E6%95%B0"><span class="nav-number">4.3.</span> <span class="nav-text">patch函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pacthVnode"><span class="nav-number">4.4.</span> <span class="nav-text">pacthVnode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#updateChildren"><span class="nav-number">4.5.</span> <span class="nav-text">updateChildren</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AD%94%E6%A1%88"><span class="nav-number">4.6.</span> <span class="nav-text">答案</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#keep-alive%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">keep-alive实现原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue-router%E5%92%8Cwindow-location%E8%B7%B3%E8%BD%AC%E7%9A%84%E5%8C%BA%E5%88%AB-%E5%AF%B9%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9D%A5%E8%AE%B2"><span class="nav-number">6.</span> <span class="nav-text">vue-router和window.location跳转的区别(对浏览器来讲)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="nav-number">7.</span> <span class="nav-text">Vue如何进行组件封装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E7%9A%84%E6%9C%BA%E5%88%B6"><span class="nav-number">8.</span> <span class="nav-text">双向数据绑定的机制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue-cli%E5%B7%A5%E7%A8%8B%E6%8A%80%E6%9C%AF%E9%9B%86%E5%90%88%E4%BB%8B%E7%BB%8D"><span class="nav-number">9.</span> <span class="nav-text">vue-cli工程技术集合介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E7%9A%84vue-cli%E5%B7%A5%E7%A8%8B%E9%83%BD%E7%94%A8%E5%88%B0%E4%BA%86%E5%93%AA%E4%BA%9B%E6%8A%80%E6%9C%AF%EF%BC%8C%E5%AE%83%E4%BB%AC%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-number">9.1.</span> <span class="nav-text">构建的vue-cli工程都用到了哪些技术，它们的作用是什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vue-cli%E5%B7%A5%E7%A8%8B%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84npm%E5%91%BD%E4%BB%A4%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="nav-number">9.2.</span> <span class="nav-text">vue-cli工程中常用的npm命令有哪些？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue-cli%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E4%BB%8B%E7%BB%8D"><span class="nav-number">10.</span> <span class="nav-text">vue-cli工程目录结构介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E8%AF%B4%E5%87%BAvue-cli%E5%B7%A5%E7%A8%8B%E4%B8%AD%E6%AF%8F%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E5%92%8C%E6%96%87%E4%BB%B6%E7%9A%84%E7%94%A8%E5%A4%84"><span class="nav-number">10.1.</span> <span class="nav-text">请说出vue-cli工程中每个文件夹和文件的用处</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E4%BD%A0%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%BA%9B-package-json-%E9%87%8C%E9%9D%A2%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="nav-number">10.2.</span> <span class="nav-text">请你详细介绍一些 package.json 里面的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#public%E5%92%8Cassets%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">10.3.</span> <span class="nav-text">public和assets文件夹的区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue-js%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9%E9%AB%98%E9%A2%91%E8%AF%95%E9%A2%98%E4%B8%80"><span class="nav-number">11.</span> <span class="nav-text">Vue.js核心知识点高频试题一</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue-js%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%A0%B8%E5%BF%83%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-number">11.1.</span> <span class="nav-text">Vue.js的两个核心是什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E4%BA%8E-Vue-%E6%98%AF%E4%B8%80%E5%A5%97%E6%9E%84%E5%BB%BA%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%E7%9A%84%E6%B8%90%E8%BF%9B%E5%BC%8F%E6%A1%86%E6%9E%B6%E7%9A%84%E7%90%86%E8%A7%A3"><span class="nav-number">11.2.</span> <span class="nav-text">对于 Vue 是一套构建用户界面的渐进式框架的理解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E8%AF%B4%E5%87%BAvue%E5%87%A0%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%9A%84%E6%8C%87%E4%BB%A4"><span class="nav-number">11.3.</span> <span class="nav-text">请说出vue几种常用的指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E9%97%AE-v-if-%E5%92%8C-v-show-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="nav-number">11.4.</span> <span class="nav-text">请问 v-if 和 v-show 有什么区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vue%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">11.5.</span> <span class="nav-text">vue常用的修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-on%E5%8F%AF%E4%BB%A5%E7%9B%91%E5%90%AC%E5%A4%9A%E4%B8%AA%E6%96%B9%E6%B3%95%E5%90%97%EF%BC%9F"><span class="nav-number">11.6.</span> <span class="nav-text">v-on可以监听多个方法吗？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vue%E4%B8%AD-key-%E5%80%BC%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">11.7.</span> <span class="nav-text">vue中 key 值的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vue%E4%BA%8B%E4%BB%B6%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8event%E5%AF%B9%E8%B1%A1%EF%BC%9F"><span class="nav-number">11.8.</span> <span class="nav-text">vue事件中如何使用event对象？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-nextTick%EF%BC%9F"><span class="nav-number">11.9.</span> <span class="nav-text">什么是$nextTick？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%BC%82%E6%AD%A5%E6%9B%B4%E6%96%B0%E8%A7%86%E5%9B%BE"><span class="nav-number">11.9.1.</span> <span class="nav-text">为什么要异步更新视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">11.9.2.</span> <span class="nav-text">应用场景</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue-%E7%BB%84%E4%BB%B6%E4%B8%AD-data-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%85%E9%A1%BB%E6%98%AF%E5%87%BD%E6%95%B0"><span class="nav-number">11.10.</span> <span class="nav-text">Vue 组件中 data 为什么必须是函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-for-%E4%B8%8E-v-if-%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">11.11.</span> <span class="nav-text">v-for 与 v-if 的优先级</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue-js%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9%E9%AB%98%E9%A2%91%E8%AF%95%E9%A2%98%E4%BA%8C"><span class="nav-number">12.</span> <span class="nav-text">Vue.js核心知识点高频试题二</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="nav-number">12.1.</span> <span class="nav-text">组件传参</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#props-emit"><span class="nav-number">12.1.1.</span> <span class="nav-text">props&#x2F;$emit</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%88%B6%E7%BB%84%E4%BB%B6%E5%90%91%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC"><span class="nav-number">12.1.1.1.</span> <span class="nav-text">父组件向子组件传值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AD%90%E7%BB%84%E4%BB%B6%E5%90%91%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC%EF%BC%88%E9%80%9A%E8%BF%87%E4%BA%8B%E4%BB%B6%E5%BD%A2%E5%BC%8F%EF%BC%89"><span class="nav-number">12.1.1.2.</span> <span class="nav-text">子组件向父组件传值（通过事件形式）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#emit-on"><span class="nav-number">12.1.2.</span> <span class="nav-text">$emit&#x2F;$on</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vuex"><span class="nav-number">12.1.3.</span> <span class="nav-text">vuex</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#attrs-listeners"><span class="nav-number">12.1.4.</span> <span class="nav-text">$attrs&#x2F;$listeners</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#provide-inject"><span class="nav-number">12.1.5.</span> <span class="nav-text">provide&#x2F;inject</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#provide%E4%B8%8E-inject%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="nav-number">12.1.5.1.</span> <span class="nav-text">provide与 inject如何实现数据响应式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#parent-children%E4%B8%8E-ref"><span class="nav-number">12.1.6.</span> <span class="nav-text">$parent &#x2F; $children与 ref</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82%E5%9C%BA%E6%99%AF%E6%80%BB%E7%BB%93"><span class="nav-number">12.1.7.</span> <span class="nav-text">组件传参场景总结</span></a></li></ol></li></ol></li></ol>

	</div>
</div>
	</div>
	
</div>
			</div>

			
		</div>

		<div class="main-content-footer">
			<footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2022</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">chengj-code</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        5 posts in total
                    </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://cn.vercount.one/js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">VISITOR COUNT</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">TOTAL PAGE VIEWS</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a></span>
            <span class="text-sm lg:block">THEME&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.2</a></span>
        </div>
        
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
		</div>
	</div>

	
	<div class="post-tools">
		<div class="post-tools-container">
	<ul class="article-tools-list">
		<!-- TOC aside toggle -->
		
		<li class="right-bottom-tools page-aside-toggle">
			<i class="fa-regular fa-outdent"></i>
		</li>
		

		<!-- go comment -->
		
	</ul>
</div>
	</div>
	

	<div class="right-side-tools-container">
		<div class="side-tools-container">
	<ul class="hidden-tools-list">
		<li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-plus"></i>
		</li>

		<li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-minus"></i>
		</li>

		<li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
			<i class="fa-regular fa-moon"></i>
		</li>

		<!-- rss -->
		

		

		<li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
			<i class="fa-regular fa-arrow-down"></i>
		</li>
	</ul>

	<ul class="visible-tools-list">
		<li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
			<i class="fa-regular fa-cog fa-spin"></i>
		</li>
		
		<li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
			<i class="arrow-up fas fa-arrow-up"></i>
			<span class="percent"></span>
		</li>
		
		
	</ul>
</div>
	</div>

	<div class="image-viewer-container">
	<img src="">
</div>

	

</main>



<script src="/js/build/libs/Swup.min.js"></script>

<script src="/js/build/libs/SwupSlideTheme.min.js"></script>

<script src="/js/build/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/build/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/build/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/build/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>




	
<script src="/js/build/tools/imageViewer.js" type="module"></script>

<script src="/js/build/utils.js" type="module"></script>

<script src="/js/build/main.js" type="module"></script>

<script src="/js/build/layouts/navbarShrink.js" type="module"></script>

<script src="/js/build/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/build/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/build/layouts/categoryList.js" type="module"></script>





    
<script src="/js/build/tools/codeBlock.js" type="module"></script>




    
<script src="/js/build/layouts/lazyload.js" type="module"></script>




    
<script src="/js/build/tools/runtime.js"></script>

    
<script src="/js/build/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/build/libs/Typed.min.js"></script>

  
<script src="/js/build/plugins/typed.js" type="module"></script>








    
<script src="/js/build/libs/anime.min.js"></script>





    
<script src="/js/build/tools/tocToggle.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/layouts/toc.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/plugins/tabs.js" type="module" data-swup-reload-script=""></script>




<script src="/js/build/libs/moment-with-locales.min.js" data-swup-reload-script=""></script>


<script src="/js/build/layouts/essays.js" type="module" data-swup-reload-script=""></script>





	
</body>

</html>